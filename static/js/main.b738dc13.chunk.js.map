{"version":3,"sources":["types.ts","lib.ts","CardItem.tsx","DeckList.tsx","DeckDetailModal.tsx","OldApp.tsx","components/NavBar.tsx","components/About.tsx","components/archetypes/RuleForm.tsx","components/archetypes/ArchetypeView.tsx","components/archetypes/EditArchetypeModal.tsx","components/archetypes/Archetypes.tsx","scrapeResultSlice.ts","components/ResultDisplay.tsx","components/ScraperForm.tsx","App.tsx","serviceWorker.ts","store.ts","index.tsx"],"names":["guildMap","shardMap","setList","code","name","identifyArchetype","result","archetypeRules","deck","combinedCards","main","map","c","sideboard","forEach","card","mb","find","count","push","a","rules","isMatch","r","atLeast","atMost","cardName","cardSet","in","some","prefixColors","colorPresence","reduce","hasColor","info","colors","color","manaCost","includes","W","U","B","R","G","colorString","colorPrefix","length","archetype","generateCardCounts","results","counts","countRow","deckCount","highlighted","scrapeUrl","url","fetch","response","text","body","decklistLineRegex","RegExp","aetherRegex","match","exec","parsed","JSON","parse","split","console","log","decks","d","i","parsedMain","x","SB","DECK_CARDS","parsedSideboard","test","CARD_ATTRIBUTES","NAME","replace","existingCard","c2","Quantity","cardInfo","pilot","player","id","favorite","spicy","duplicatePilot","STANDINGS","sort","b","aStanding","s","bStanding","RANK","mtgoUrl","eventType","event_name","eventDate","date","deckResults","cardCounts","numbered","CardItem","props","toggleCardHighlight","List","Item","onClick","className","Popup","basic","mouseEnterDelay","mouseLeaveDelay","position","trigger","Content","Image","src","replaceAll","colorLabels","typeLabels","colorColors","typeColors","DeckList","updateDeck","goToNext","collapsible","useState","colorCount","setColorCount","typeCount","setTypeCount","collapsed","setCollapsed","useEffect","wCount","uCount","bCount","rCount","gCount","cCount","creatures","noncreatures","lands","types","mainIndex","findIndex","sideIndex","Planeswalkers","Creatures","Instants","Sorceries","Artifacts","Enchantments","Lands","Unknown","side","Companion","companion","Grid","width","container","centered","padded","Row","verticalAlign","Column","Header","style","marginBottom","Icon","floated","textAlign","horizontal","size","Input","label","value","onChange","e","data","onKeyPress","event","key","content","marginTop","Object","keys","filter","Container","labels","datasets","backgroundColor","options","title","display","legend","slice","cutoutPercentage","DeckDetailModal","setResults","open","onClose","displayedDeckIndex","setDisplayedDeckIndex","goToNextDeck","displayedDeck","index","res","Modal","top","left","closeOnDimmerClick","closeIcon","Button","App","hasScraped","setHasScraped","wotcUrl","setWotcUrl","isLoading","setIsLoading","resultList","setResultList","selectedCards","setSelectedCards","setCardCounts","selectedExpansions","setSelectedExpansions","deckModalOpen","setDeckModalOpen","scrapeError","setScrapeError","isNumberedResults","setIsNumberedResults","expandOptions","setExpandOptions","textFormat","setTextFormat","filterForSpice","setFilterForSpice","filterForFave","setFilterForFave","cardOptions","setCardOptions","showReprints","setShowReprints","setArchetypeRules","rulesFromStorage","window","localStorage","getItem","setItem","stringify","useCallback","rule","deckFitsRule","scrape","scrapeResults","namedResults","generatePlaintext","resultLines","path","txt","charAt","toUpperCase","toLowerCase","join","generateMarkdownLine","muUrl","muPilot","highlights","muHighlights","Array","from","Set","generateMarkdown","muString","copyToClipboard","navigator","clipboard","writeText","deckHasCard","filterCards","applyDeckFilters","filterExpansions","expansions","flatMap","printings","deckHasExpansion","applyCardFilters","cards","p","filteredResults","filteredCardCounts","previewText","decksByCard","urls","panes","menuItem","pane","Tab","Pane","Form","TextArea","height","Checkbox","checked","Dimmer","active","inverted","Loader","columns","Message","success","href","target","placeholder","rel","marginLeft","disabled","Accordion","Title","Dropdown","multiple","clearable","search","selection","lazyLoad","_e","Field","radio","toggle","negative","renderActiveOnly","NavBar","location","pathname","setPath","Menu","as","Link","to","About","padding","paddingLeft","ordered","ListItem","RuleForm","updateRule","removeRule","minCharacters","fluid","undefined","icon","ArchetypeView","updateArchetype","newRules","splice","divided","EditArchetypeModal","localArchetype","setLocalArchetype","Actions","formatDropdownOptions","ArchetypePage","selectedFormat","setSelectedFormat","selectedArchetype","setSelectedArchetype","editModalOpen","setEditModalOpen","oldArchetypeModalOpen","setOldArchtypeModalOpen","onDragEnd","destination","items","list","startIndex","endIndex","removed","reorder","source","droppableId","provided","Ref","innerRef","droppableProps","item","draggableId","toString","draggableProps","dragHandleProps","newArchetypes","handleDeleteClick","addArchetype","scrapeResultSlice","createSlice","initialState","reducers","pushScrapeResult","state","action","payload","updateScrapeResult","clearResults","actions","selectScrapeResults","ResultDisplay","scrapeResult","dispatch","useDispatch","copyMessageVisible","setCopyMessageVisible","handleMarkdownClick","setTimeout","deckResult","floating","hidden","onDismiss","ScraperForm","setUrls","useSelector","scrapeUrls","splitUrls","trim","startsWith","error","onInput","Archetypes","OldApp","Boolean","hostname","configureStore","reducer","scrapeResultReducer","ReactDOM","render","store","document","getElementById","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.b738dc13.chunk.js","sourcesContent":["export interface ScrapeResult {\r\n    id: number;\r\n    mtgoUrl: string;\r\n    eventType: string;\r\n    eventDate: string;\r\n    deckResults: Result[];\r\n    cardCounts: CardCount[];\r\n    numbered: boolean;\r\n}\r\n\r\nexport interface Deck {\r\n    main: Card[];\r\n    sideboard: Card[];\r\n}\r\n\r\nexport interface Card {\r\n    name: string;\r\n    count: number;\r\n    highlighted: boolean;\r\n    info?: CardInfo;\r\n}\r\n\r\nexport interface Result {\r\n    pilot: string;\r\n    url: string;\r\n    deck: Deck;\r\n    duplicatePilot: boolean;\r\n    archetype: string;\r\n    id: number;\r\n    favorite: boolean;\r\n    spicy: boolean;\r\n}\r\n\r\nexport interface CardInfo {\r\n    colors: Color[];\r\n    faceName: string;\r\n    type: string;\r\n    types: CardType[];\r\n    manaCost: string;\r\n    companion: boolean;\r\n    power: string;\r\n    toughness: string;\r\n    otherHalf: {\r\n        colors: Color[];\r\n        faceName: string;\r\n        type: string;\r\n        types: CardType[];\r\n        manaCost: string;\r\n        text: string;\r\n        power: string;\r\n        toughness: string;\r\n    };\r\n    printings: string[];\r\n}\r\n\r\nexport interface CardCount {\r\n    card: Card;\r\n    deckCount: number;\r\n}\r\n\r\nexport type Color = \"W\" | \"U\" | \"B\" | \"R\" | \"G\";\r\nexport type CardType = \"Creature\" | \"Land\" | \"Instant\" | \"Sorcery\" | \"Artifact\" | \"Enchantment\" | \"Planeswalker\";\r\n\r\nexport const setList = [\r\n    { code: \"BRO\", name: \"The Brothers' War\" },\r\n    { code: \"DMU\", name: \"Dominaria United\" },\r\n    { code: \"SNC\", name: \"Streets of New Capenna\" },\r\n    { code: \"NEO\", name: \"Kamigawa: Neon Dynasty\" },\r\n    { code: \"VOW\", name: \"Innistrad: Crimson Vow\" },\r\n    { code: \"MID\", name: \"Innistrad: Midnight Hunt\" },\r\n    { code: \"AFR\", name: \"Adventures in the Forgotten Realms\" },\r\n    { code: \"MH2\", name: \"Modern Horizons 2\" },\r\n    { code: \"STX\", name: \"Strixhaven: School of Mages\" },\r\n    { code: \"KHM\", name: \"Kaldheim\" },\r\n    { code: \"ZNR\", name: \"Zendikar Rising\" },\r\n    { code: \"M21\", name: \"Core Set 2021\" },\r\n    { code: \"IKO\", name: \"Ikoria: Lair of Behemoths\" },\r\n    { code: \"THB\", name: \"Theros Beyond Death\" },\r\n    { code: \"ELD\", name: \"Throne of Eldraine\" },\r\n    { code: \"M20\", name: \"Core Set 2020\" },\r\n    { code: \"MH1\", name: \"Modern Horizons\" },\r\n    { code: \"WAR\", name: \"War of the Spark\" }\r\n];\r\n\r\nexport type Format = \"standard\" | \"pioneer\" | \"modern\" | \"legacy\" | \"vintage\" | \"pauper\";\r\n\r\nexport interface Metagame {\r\n    format: Format;\r\n    archetypes: Archetype[];\r\n}\r\n\r\nexport interface Archetype {\r\n    id: number;\r\n    name: string;\r\n    prefixColors?: boolean;\r\n    rules: Rule[];\r\n}\r\n\r\nexport interface Rule {\r\n    cardName: string;\r\n    in: \"main\" | \"side\" | \"both\";\r\n    atLeast?: number;\r\n    atMost?: number;\r\n}\r\n\r\nexport enum guildMap {\r\n    UW = \"Azorius\",\r\n    UB = \"Dimir\",\r\n    UR = \"Izzet\",\r\n    UG = \"Simic\",\r\n    BW = \"Orzhov\",\r\n    BR = \"Rakdos\",\r\n    BG = \"Golgari\",\r\n    RG = \"Gruul\",\r\n    RW = \"Boros\",\r\n    GW = \"Selesnya\"\r\n}\r\n\r\nexport enum shardMap {\r\n    UBR = \"Grixis\",\r\n    UBG = \"Sultai\",\r\n    UBW = \"Esper\",\r\n    URG = \"Temur\",\r\n    URW = \"Jeskai\",\r\n    UGW = \"Bant\",\r\n    BRG = \"Jund\",\r\n    BRW = \"Mardu\",\r\n    BGW = \"Abzan\",\r\n    RGW = \"Naya\"\r\n}\r\n\r\nexport const thx = `Direct links courtesy of /u/FereMiyJeenyus and their [MTGO Results Scraper](https://feremiyjeenyus.github.io/mtgo-results-scraper/about). If you've appreciated this post, consider [supporting their cardboard addiction](https://ko-fi.com/feremiyjeenyus).`;\r\n","import fetch from \"node-fetch\";\r\nimport { Archetype, Card, CardCount, Deck, guildMap, Result, ScrapeResult, shardMap } from \"./types\";\r\nimport cardInfo from \"./resources/cardInfo.json\";\r\n\r\nexport const identifyArchetype = (result: Result, archetypeRules: Archetype[]): Result => {\r\n    const { deck } = result;\r\n    //lazy clone the card objects because we add the sideboard counts\r\n    const combinedCards = deck.main.map((c) => ({ ...c }));\r\n    deck.sideboard.forEach((card) => {\r\n        const mb = combinedCards.find((c) => c.name === card.name);\r\n        if (!mb) {\r\n            combinedCards.push(card);\r\n        } else {\r\n            mb.count += card.count;\r\n        }\r\n    });\r\n    for (const a of archetypeRules) {\r\n        const { name, rules } = a;\r\n        let isMatch = true;\r\n        rules.forEach((r) => {\r\n            const { atLeast, atMost, cardName } = r;\r\n            if (isMatch) {\r\n                //short circuit if a rule isn't fit\r\n                let cardSet: Card[] = [];\r\n                switch (r.in) {\r\n                    case \"main\":\r\n                        cardSet = deck.main;\r\n                        break;\r\n                    case \"side\":\r\n                        cardSet = deck.sideboard;\r\n                        break;\r\n                    case \"both\":\r\n                        cardSet = combinedCards;\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n\r\n                isMatch =\r\n                    (atMost === 0 && !cardSet.some((c) => c.name === cardName)) ||\r\n                    cardSet.some((c) => c.name === cardName && (!atLeast || c.count >= atLeast) && (!atMost || c.count <= atMost));\r\n            }\r\n        });\r\n        if (isMatch) {\r\n            if (a.prefixColors) {\r\n                const colorPresence = combinedCards.reduce(\r\n                    (hasColor, card) => {\r\n                        card.info?.colors.forEach((color) => {\r\n                            if (!card.info?.manaCost?.includes(\"/\")) {\r\n                                hasColor[color] = true;\r\n                            }\r\n                        });\r\n                        return hasColor;\r\n                    },\r\n                    { W: false, U: false, B: false, R: false, G: false }\r\n                );\r\n                const colorString = `${colorPresence.U ? \"U\" : \"\"}${colorPresence.B ? \"B\" : \"\"}${colorPresence.R ? \"R\" : \"\"}${colorPresence.G ? \"G\" : \"\"}${\r\n                    colorPresence.W ? \"W\" : \"\"\r\n                }`;\r\n                let colorPrefix = \"\";\r\n                const useGuildNames = false;\r\n                const useShardNames = true;\r\n                switch (colorString.length) {\r\n                    case 0:\r\n                        colorPrefix = `Colorless`;\r\n                        break;\r\n                    case 1:\r\n                        colorPrefix = `Mono-${colorString}`;\r\n                        break;\r\n                    case 2:\r\n                        colorPrefix = useGuildNames ? guildMap[colorString] : colorString;\r\n                        break;\r\n                    case 3:\r\n                        colorPrefix = useShardNames ? shardMap[colorString] : colorString;\r\n                        break;\r\n                    case 4:\r\n                        colorPrefix = colorString;\r\n                        break;\r\n                    case 5:\r\n                        colorPrefix = \"5c\";\r\n                        break;\r\n                }\r\n                result.archetype = `${colorPrefix} ${name}`;\r\n            } else {\r\n                result.archetype = name;\r\n            }\r\n            break; //escape loop\r\n        }\r\n    }\r\n    return result;\r\n};\r\n\r\nexport const generateCardCounts = (results: Result[]): CardCount[] => {\r\n    const counts: CardCount[] = [];\r\n    results.forEach((r) => {\r\n        r.deck.main.forEach((card) => {\r\n            const countRow = counts.find((c) => c.card.name === card.name);\r\n            if (!countRow) {\r\n                counts.push({\r\n                    card: { ...card, highlighted: false },\r\n                    deckCount: 1\r\n                });\r\n            } else {\r\n                countRow.card.count += card.count;\r\n                countRow.deckCount++;\r\n            }\r\n        });\r\n\r\n        r.deck.sideboard.forEach((card) => {\r\n            const countRow = counts.find((c) => c.card.name === card.name);\r\n            if (!countRow) {\r\n                counts.push({\r\n                    card: { ...card, highlighted: false },\r\n                    deckCount: 1\r\n                });\r\n            } else {\r\n                countRow.card.count += card.count;\r\n                if (!r.deck.main.find((c) => c.name === card.name)) {\r\n                    countRow.deckCount++;\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    return counts;\r\n};\r\n\r\nexport const scrapeUrl = async (url: string): Promise<ScrapeResult | undefined> => {\r\n    try {\r\n        const response = await fetch(`https://scraper-cors.herokuapp.com/${url}`);\r\n        const body = await response.text();\r\n        const decklistLineRegex = new RegExp(\"window.MTGO.decklists.data = .*;\");\r\n        const aetherRegex = new RegExp(\"Ã[^ ]*r\");\r\n        const match = decklistLineRegex.exec(body);\r\n        if (match) {\r\n            const parsed = JSON.parse(match[0].split(\" = \")[1].split(\";\")[0]);\r\n            console.log(parsed);\r\n            const results: Result[] = [];\r\n            parsed.decks.map((d, i) => {\r\n                const parsedMain = d.deck.find((x) => !x.SB).DECK_CARDS;\r\n                const parsedSideboard = d.deck.find((x) => x.SB).DECK_CARDS;\r\n                const main: Card[] = [];\r\n                parsedMain.forEach((c) => {\r\n                    if (aetherRegex.test(c.CARD_ATTRIBUTES.NAME)) c.CARD_ATTRIBUTES.NAME = c.CARD_ATTRIBUTES.NAME.replace(aetherRegex, \"Aether\");\r\n                    const existingCard = main.find((c2) => c2.name === c.CARD_ATTRIBUTES.NAME);\r\n                    if (existingCard) {\r\n                        existingCard.count += c.Quantity;\r\n                    } else {\r\n                        main.push({\r\n                            name: c.CARD_ATTRIBUTES.NAME,\r\n                            count: c.Quantity,\r\n                            highlighted: false,\r\n                            info: cardInfo[c.CARD_ATTRIBUTES.NAME]\r\n                        });\r\n                    }\r\n                });\r\n                const sideboard: Card[] = [];\r\n                parsedSideboard.forEach((c) => {\r\n                    const existingCard = sideboard.find((c2) => c2.name === c.CARD_ATTRIBUTES.NAME);\r\n                    if (existingCard) {\r\n                        existingCard.count += c.Quantity;\r\n                    } else {\r\n                        sideboard.push({\r\n                            name: c.CARD_ATTRIBUTES.NAME,\r\n                            count: c.Quantity,\r\n                            highlighted: false,\r\n                            info: cardInfo[c.CARD_ATTRIBUTES.NAME]\r\n                        });\r\n                    }\r\n                });\r\n                const deck: Deck = {\r\n                    main,\r\n                    sideboard\r\n                };\r\n                results.push({\r\n                    pilot: d.player,\r\n                    url: `${url}#deck_${d.player}`,\r\n                    archetype: \"\",\r\n                    id: i,\r\n                    favorite: false,\r\n                    spicy: false,\r\n                    deck,\r\n                    duplicatePilot: !!results.find((r) => r.pilot === d.player)\r\n                });\r\n            });\r\n            if (parsed.STANDINGS) {\r\n                results.sort((a, b) => {\r\n                    const aStanding = parsed.STANDINGS.find((s) => s.NAME === a.pilot);\r\n                    const bStanding = parsed.STANDINGS.find((s) => s.NAME === b.pilot);\r\n                    return aStanding.RANK - bStanding.RANK;\r\n                });\r\n            }\r\n            return {\r\n                id: 0,\r\n                mtgoUrl: url,\r\n                eventType: parsed.event_name,\r\n                eventDate: parsed.date.split(\"T\")[0],\r\n                deckResults: results,\r\n                cardCounts: generateCardCounts(results),\r\n                numbered: url.includes(\"champ\") || url.includes(\"challenge\") || url.includes(\"qualifier\")\r\n            };\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        throw err;\r\n    }\r\n    return;\r\n};\r\n","import React from \"react\";\r\nimport { Card } from \"./types\";\r\nimport { List, Popup, Image } from \"semantic-ui-react\";\r\n\r\ninterface CardItemProps {\r\n    card: Card;\r\n    toggleCardHighlight(Card: Card): void;\r\n}\r\n\r\nconst CardItem: React.FC<CardItemProps> = (props: CardItemProps) => {\r\n    const { card, toggleCardHighlight } = props;\r\n\r\n    return (\r\n        <List.Item key={card.name} onClick={() => toggleCardHighlight(card)} className={card.highlighted ? \"highlight\" : \"\"}>\r\n            <Popup\r\n                basic\r\n                mouseEnterDelay={700}\r\n                mouseLeaveDelay={500}\r\n                position=\"top center\"\r\n                trigger={\r\n                    <p>\r\n                        {card.count} {card.name}\r\n                    </p>\r\n                }\r\n            >\r\n                <Popup.Content>\r\n                    {card.info && <Image src={`https://api.scryfall.com/cards/named?format=image&exact=${card.name.replaceAll(\" \", \"+\")}`} />}\r\n                </Popup.Content>\r\n            </Popup>\r\n        </List.Item>\r\n    );\r\n};\r\n\r\nexport default CardItem;\r\n","import React, { useState, useEffect, ChangeEvent } from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { Header, Grid, List, Container, Icon, Input, InputOnChangeData } from \"semantic-ui-react\";\r\nimport \"./App.css\";\r\nimport { Doughnut } from \"react-chartjs-2\";\r\nimport { Result, Card } from \"./types\";\r\nimport CardItem from \"./CardItem\";\r\n\r\ninterface DeckListProps {\r\n    result: Result;\r\n    collapsible?: boolean;\r\n    updateDeck(result: Result): void;\r\n    goToNext?(): void;\r\n}\r\n\r\nconst colorLabels = [\"White\", \"Blue\", \"Black\", \"Red\", \"Green\", \"Colorless\"];\r\n\r\nconst typeLabels = [\"Creature\", \"Noncreature\", \"Land\"];\r\n\r\nconst colorColors = [\"#fff8d6\", \"#367ae0\", \"#404040\", \"#db2e2e\", \"#187d2a\", \"#cfcfcf\"];\r\n\r\nconst typeColors = [\"#8ba349\", \"#c48dc2\", \"#ffb114\"];\r\n\r\nconst DeckList: React.FC<DeckListProps> = (props: DeckListProps) => {\r\n    const { result, updateDeck, goToNext, collapsible = true } = props;\r\n    const [colorCount, setColorCount] = useState<number[]>([]);\r\n    const [typeCount, setTypeCount] = useState<number[]>([]);\r\n    const [collapsed, setCollapsed] = useState<boolean>(true);\r\n\r\n    useEffect(() => {\r\n        if (!result) return;\r\n        let [wCount, uCount, bCount, rCount, gCount, cCount] = [0, 0, 0, 0, 0, 0];\r\n        let [creatures, noncreatures, lands] = [0, 0, 0];\r\n\r\n        result.deck.main.forEach((card) => {\r\n            if (card.info) {\r\n                const { colors, types } = card.info;\r\n                if (colors.includes(\"W\")) wCount += card.count;\r\n                if (colors.includes(\"U\")) uCount += card.count;\r\n                if (colors.includes(\"B\")) bCount += card.count;\r\n                if (colors.includes(\"R\")) rCount += card.count;\r\n                if (colors.includes(\"G\")) gCount += card.count;\r\n                if (!colors.length && !card.info.types.includes(\"Land\")) cCount += card.count;\r\n\r\n                if (types.includes(\"Creature\")) creatures += card.count;\r\n                else if (types.includes(\"Land\")) lands += card.count;\r\n                else noncreatures += card.count;\r\n            }\r\n        });\r\n        setColorCount([wCount, uCount, bCount, rCount, gCount, cCount]);\r\n        setTypeCount([creatures, noncreatures, lands]);\r\n    }, [result]);\r\n\r\n    const toggleCardHighlight = (card: Card) => {\r\n        const mainIndex = result.deck.main.findIndex((c) => c.name === card.name);\r\n        const sideIndex = result.deck.sideboard.findIndex((c) => c.name === card.name);\r\n        const main = [...result.deck.main];\r\n        const sideboard = [...result.deck.sideboard];\r\n        if (mainIndex > -1) {\r\n            main[mainIndex] = { ...main[mainIndex], highlighted: !main[mainIndex].highlighted };\r\n        }\r\n        if (sideIndex > -1) {\r\n            sideboard[sideIndex] = { ...sideboard[sideIndex], highlighted: !sideboard[sideIndex].highlighted };\r\n        }\r\n        updateDeck({ ...result, deck: { main, sideboard } });\r\n    };\r\n\r\n    const toggleSpicy = () => {\r\n        updateDeck({ ...result, spicy: !result.spicy });\r\n    };\r\n\r\n    const toggleFavorite = () => {\r\n        updateDeck({ ...result, favorite: !result.favorite });\r\n    };\r\n\r\n    const handleSetArchetype = (e: ChangeEvent, data: InputOnChangeData) => {\r\n        const { value } = data;\r\n        updateDeck({ ...result, archetype: value });\r\n    };\r\n\r\n    const handleKeyPress = (event) => {\r\n        if (event.key === \"Enter\" && !!goToNext) {\r\n            goToNext();\r\n        }\r\n    };\r\n\r\n    const main: { [key: string]: React.ReactElement[] } = {\r\n        Planeswalkers: [],\r\n        Creatures: [],\r\n        Instants: [],\r\n        Sorceries: [],\r\n        Artifacts: [],\r\n        Enchantments: [],\r\n        Lands: [],\r\n        Unknown: []\r\n    };\r\n\r\n    result.deck.main.forEach((card) => {\r\n        if (!card.info) {\r\n            main.Unknown.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Creature\")) {\r\n            main.Creatures.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Land\")) {\r\n            main.Lands.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Instant\")) {\r\n            main.Instants.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Sorcery\")) {\r\n            main.Sorceries.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Artifact\") && !card.info.types.includes(\"Creature\")) {\r\n            main.Artifacts.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Enchantment\") && !card.info.types.includes(\"Creature\")) {\r\n            main.Enchantments.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Planeswalker\")) {\r\n            main.Planeswalkers.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        }\r\n    });\r\n\r\n    const side: { [key: string]: React.ReactElement[] } = {\r\n        Companion: [],\r\n        Planeswalkers: [],\r\n        Creatures: [],\r\n        Instants: [],\r\n        Sorceries: [],\r\n        Artifacts: [],\r\n        Enchantments: [],\r\n        Lands: [],\r\n        Unknown: []\r\n    };\r\n\r\n    result.deck.sideboard.forEach((card) => {\r\n        if (!card.info) {\r\n            side.Unknown.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Creature\")) {\r\n            if (card.info.companion) {\r\n                side.Companion.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n            } else {\r\n                side.Creatures.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n            }\r\n        } else if (card.info.types.includes(\"Land\")) {\r\n            side.Lands.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Instant\")) {\r\n            side.Instants.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Sorcery\")) {\r\n            side.Sorceries.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Artifact\") && !card.info.types.includes(\"Creature\")) {\r\n            side.Artifacts.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Enchantment\") && !card.info.types.includes(\"Creature\")) {\r\n            side.Enchantments.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Planeswalker\")) {\r\n            side.Planeswalkers.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        }\r\n    });\r\n\r\n    return (\r\n        <Grid width={16} container centered className=\"decklist\" padded>\r\n            <Grid.Row className={result.archetype ? \"decklist-header\" : \"decklist-header-unnamed\"} verticalAlign=\"middle\">\r\n                <Grid.Column width={6} onClick={() => setCollapsed(!collapsed)}>\r\n                    <Header style={{ marginBottom: 0 }}>\r\n                        {collapsible && <Icon name={collapsed ? \"triangle right\" : \"triangle down\"} />}\r\n                        {result.archetype ? `${result.archetype} | ` : \"\"}\r\n                        {result.pilot}\r\n                    </Header>\r\n                </Grid.Column>\r\n                <Grid.Column width={8} floated=\"right\" textAlign=\"right\">\r\n                    <List horizontal>\r\n                        <List.Item>\r\n                            <Icon name=\"heart\" size=\"big\" color={result.favorite ? \"pink\" : \"grey\"} className=\"clickable\" onClick={toggleFavorite} />\r\n                        </List.Item>\r\n                        <List.Item>\r\n                            <Icon name=\"hotjar\" size=\"big\" color={result.spicy ? \"orange\" : \"grey\"} className=\"clickable\" onClick={toggleSpicy} />\r\n                        </List.Item>\r\n                        <List.Item>\r\n                            <Input label=\"Archetype\" value={result.archetype} onChange={handleSetArchetype} onKeyPress={handleKeyPress} />\r\n                        </List.Item>\r\n                    </List>\r\n                </Grid.Column>\r\n            </Grid.Row>\r\n            {(!collapsible || !collapsed) && (\r\n                <Grid.Row>\r\n                    <Grid.Column width={4}>\r\n                        <Header content=\"Main\" style={{ marginBottom: 0 }} />\r\n                        <List style={{ marginTop: 0 }}>\r\n                            <List.Item>\r\n                                {Object.keys(main)\r\n                                    .filter((key) => main[key].length)\r\n                                    .map((key) => {\r\n                                        return (\r\n                                            <List.List key={key}>\r\n                                                <List.Header content={key} />\r\n                                                {main[key]}\r\n                                            </List.List>\r\n                                        );\r\n                                    })}\r\n                            </List.Item>\r\n                        </List>\r\n                    </Grid.Column>\r\n                    <Grid.Column width={3}>\r\n                        <Header content=\"Sideboard\" style={{ marginBottom: 0 }} />\r\n                        <List style={{ marginTop: 0 }}>\r\n                            <List.Item>\r\n                                {Object.keys(side)\r\n                                    .filter((key) => side[key].length)\r\n                                    .map((key) => {\r\n                                        return (\r\n                                            <List.List key={key}>\r\n                                                <List.Header>\r\n                                                    {key === \"Companion\" && <Icon name=\"paw\" />}\r\n                                                    {key}\r\n                                                    {key === \"Companion\" && <Icon name=\"paw\" />}\r\n                                                </List.Header>\r\n                                                {side[key]}\r\n                                            </List.List>\r\n                                        );\r\n                                    })}\r\n                            </List.Item>\r\n                        </List>\r\n                    </Grid.Column>\r\n                    <Grid.Column width={6}>\r\n                        <Container style={{ marginBottom: \"10px\" }}>\r\n                            <Doughnut\r\n                                data={{\r\n                                    labels: colorLabels,\r\n                                    datasets: [\r\n                                        {\r\n                                            backgroundColor: colorColors,\r\n                                            data: colorCount\r\n                                        }\r\n                                    ]\r\n                                }}\r\n                                options={{\r\n                                    title: {\r\n                                        display: true,\r\n                                        text: \"Color Distribution\"\r\n                                    },\r\n                                    legend: { display: false }\r\n                                }}\r\n                            />\r\n                        </Container>\r\n                        <Container>\r\n                            <Doughnut\r\n                                data={{\r\n                                    labels: typeLabels,\r\n                                    datasets: [\r\n                                        {\r\n                                            backgroundColor: typeColors,\r\n                                            data: typeCount,\r\n                                            label: \"1\"\r\n                                        },\r\n                                        {\r\n                                            backgroundColor: typeColors.slice(0, 2),\r\n                                            data: typeCount.slice(0, 2),\r\n                                            label: \"2\"\r\n                                        }\r\n                                    ]\r\n                                }}\r\n                                options={{\r\n                                    title: {\r\n                                        display: true,\r\n                                        text: \"Type Distribution\"\r\n                                    },\r\n                                    legend: { display: true, position: \"bottom\" },\r\n                                    cutoutPercentage: 30\r\n                                }}\r\n                            />\r\n                        </Container>\r\n                    </Grid.Column>\r\n                </Grid.Row>\r\n            )}\r\n        </Grid>\r\n    );\r\n};\r\n\r\nexport default DeckList;\r\n","import React, { useState } from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { Button, Modal, List, Container } from \"semantic-ui-react\";\r\nimport \"./App.css\";\r\nimport { Result } from \"./types\";\r\nimport DeckList from \"./DeckList\";\r\n\r\ninterface DeckDetailModalProps {\r\n    results: Result[];\r\n    setResults(results: Result[]): void;\r\n    open: boolean;\r\n    onClose(): void;\r\n}\r\n\r\nconst DeckDetailModal: React.FC<DeckDetailModalProps> = (props: DeckDetailModalProps) => {\r\n    const { results, setResults, open, onClose } = props;\r\n    const [displayedDeckIndex, setDisplayedDeckIndex] = useState<number>(0);\r\n\r\n    const goToNextDeck = () => {\r\n        if (!displayedDeck) return;\r\n        const index = displayedDeckIndex || 0;\r\n\r\n        const res = [...results];\r\n        res[index] = displayedDeck;\r\n        setResults(res);\r\n\r\n        if (index + 1 < results.length) {\r\n            setDisplayedDeckIndex(index + 1);\r\n        } else {\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    const goToPreviousDeck = () => {\r\n        if (!displayedDeck) return;\r\n        const index = displayedDeckIndex || 0;\r\n\r\n        const res = [...results];\r\n        res[index] = displayedDeck;\r\n        setResults(res);\r\n\r\n        if (index !== 0) {\r\n            setDisplayedDeckIndex(index - 1);\r\n        } else {\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    const updateDisplayedDeck = (result: Result) => {\r\n        const res = [...results];\r\n        res[displayedDeckIndex] = result;\r\n        setResults(res);\r\n    };\r\n\r\n    const displayedDeck = results[displayedDeckIndex];\r\n    return (\r\n        <Modal open={open} onClose={onClose} style={{ top: \"3em\", left: \"calc(50vw - 475px)\" }} closeOnDimmerClick={false} closeIcon>\r\n            <Modal.Header>\r\n                <Container textAlign=\"right\">\r\n                    <List horizontal>\r\n                        <List.Item>\r\n                            <Button onClick={goToPreviousDeck} content=\"Previous\" />\r\n                        </List.Item>\r\n                        <List.Item>\r\n                            <Button onClick={goToNextDeck} content=\"Next\" />\r\n                        </List.Item>\r\n                    </List>\r\n                </Container>\r\n            </Modal.Header>\r\n            <Modal.Content>\r\n                {!!displayedDeck && <DeckList result={displayedDeck} updateDeck={updateDisplayedDeck} collapsible={false} goToNext={goToNextDeck} />}\r\n            </Modal.Content>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default DeckDetailModal;\r\n","import React, { useState, useCallback, useEffect } from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { Header, Container, Grid, Input, Button, Form, Message, Tab, List, DropdownItemProps, Accordion, Icon, Dimmer, Loader } from \"semantic-ui-react\";\r\nimport \"./App.css\";\r\nimport { scrapeUrl } from \"./lib\";\r\nimport { Result, Deck, setList, Card, CardCount, Rule, Archetype, guildMap, shardMap } from \"./types\";\r\nimport DeckDetailModal from \"./DeckDetailModal\";\r\n\r\nexport type TextFormat = \"plaintext\" | \"markdown\";\r\nconst thx = `Direct links courtesy of /u/FereMiyJeenyus and their [MTGO Results Scraper](https://feremiyjeenyus.github.io/mtgo-results-scraper/)`;\r\n\r\nconst App: React.FC = () => {\r\n    const [hasScraped, setHasScraped] = useState<boolean>(false);\r\n    const [wotcUrl, setWotcUrl] = useState<string>(\"\");\r\n    const [isLoading, setIsLoading] = useState<boolean>(false);\r\n    const [resultList, setResultList] = useState<Result[]>([]);\r\n    const [selectedCards, setSelectedCards] = useState<string[]>([]);\r\n    const [cardCounts, setCardCounts] = useState<CardCount[]>([]);\r\n    const [selectedExpansions, setSelectedExpansions] = useState<string[]>([]);\r\n    const [deckModalOpen, setDeckModalOpen] = useState<boolean>(false);\r\n    const [scrapeError, setScrapeError] = useState<boolean>(false);\r\n    const [isNumberedResults, setIsNumberedResults] = useState<boolean>(false);\r\n    const [expandOptions, setExpandOptions] = useState<boolean>(false);\r\n    const [textFormat, setTextFormat] = useState<TextFormat>(\"markdown\");\r\n    const [filterForSpice, setFilterForSpice] = useState<boolean>(false);\r\n    const [filterForFave, setFilterForFave] = useState<boolean>(false);\r\n    const [cardOptions, setCardOptions] = useState<DropdownItemProps[]>([]);\r\n    const [showReprints, setShowReprints] = useState<boolean>(true);\r\n\r\n    const [archetypeRules, setArchetypeRules] = useState<Archetype[]>([]);\r\n\r\n    useEffect(() => {\r\n        const rulesFromStorage = window.localStorage?.getItem(\"archetypeRules\");\r\n        if (rulesFromStorage && rulesFromStorage !== \"undefined\") {\r\n            setArchetypeRules(JSON.parse(rulesFromStorage));\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        window.localStorage?.setItem(\"archetypeRules\", JSON.stringify(archetypeRules));\r\n    }, [archetypeRules]);\r\n\r\n    // scraping\r\n    const generateCardCounts = (results: Result[]) => {\r\n        const counts: CardCount[] = [];\r\n        results.forEach((r) => {\r\n            r.deck.main.forEach((card) => {\r\n                const countRow = counts.find((c) => c.card.name === card.name);\r\n                if (!countRow) {\r\n                    counts.push({\r\n                        card: { ...card, highlighted: false },\r\n                        deckCount: 1\r\n                    });\r\n                } else {\r\n                    countRow.card.count += card.count;\r\n                    countRow.deckCount++;\r\n                }\r\n            });\r\n\r\n            r.deck.sideboard.forEach((card) => {\r\n                const countRow = counts.find((c) => c.card.name === card.name);\r\n                if (!countRow) {\r\n                    counts.push({\r\n                        card: { ...card, highlighted: false },\r\n                        deckCount: 1\r\n                    });\r\n                } else {\r\n                    countRow.card.count += card.count;\r\n                    if (!r.deck.main.find((c) => c.name === card.name)) {\r\n                        countRow.deckCount++;\r\n                    }\r\n                }\r\n            });\r\n        });\r\n\r\n        setCardOptions(\r\n            counts\r\n                .sort((a, b) => {\r\n                    if (a.card.name < b.card.name) return -1;\r\n                    if (b.card.name < a.card.name) return 1;\r\n                    return 0;\r\n                })\r\n                .map((c) => ({\r\n                    key: c.card.name,\r\n                    text: c.card.name,\r\n                    value: c.card.name\r\n                }))\r\n        );\r\n        setCardCounts(counts);\r\n    };\r\n\r\n    const deckFitsRule = (deck: Card[], rule: Rule) => {\r\n        const { cardName, atMost, atLeast } = rule;\r\n        return (\r\n            (atMost === 0 && !deck.some((c) => c.name === cardName)) ||\r\n            deck.some((c) => c.name === cardName && (!atLeast || c.count >= atLeast) && (!atMost || c.count <= atMost))\r\n        );\r\n    };\r\n\r\n    const identifyArchetype = useCallback(\r\n        (result: Result): Result => {\r\n            const { deck } = result;\r\n            //lazy clone the card objects because we add the sideboard counts\r\n            const combinedCards = deck.main.map((c) => ({ ...c }));\r\n            deck.sideboard.forEach((card) => {\r\n                const mb = combinedCards.find((c) => c.name === card.name);\r\n                if (!mb) {\r\n                    combinedCards.push(card);\r\n                } else {\r\n                    mb.count += card.count;\r\n                }\r\n            });\r\n            for (const a of archetypeRules) {\r\n                const { name, rules } = a;\r\n                let isMatch = true;\r\n                rules.forEach((r) => {\r\n                    if (isMatch) {\r\n                        //short circuit if a rule isn't fit\r\n                        let cardSet: Card[] = [];\r\n                        switch (r.in) {\r\n                            case \"main\":\r\n                                cardSet = deck.main;\r\n                                break;\r\n                            case \"side\":\r\n                                cardSet = deck.sideboard;\r\n                                break;\r\n                            case \"both\":\r\n                                cardSet = combinedCards;\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n\r\n                        isMatch = deckFitsRule(cardSet, r);\r\n                    }\r\n                });\r\n                if (isMatch) {\r\n                    if (a.prefixColors) {\r\n                        const colorPresence = combinedCards.reduce(\r\n                            (hasColor, card) => {\r\n                                card.info?.colors.forEach((color) => {\r\n                                    if (!card.info?.manaCost?.includes(\"/\")) {\r\n                                        hasColor[color] = true;\r\n                                    }\r\n                                });\r\n                                return hasColor;\r\n                            },\r\n                            { W: false, U: false, B: false, R: false, G: false }\r\n                        );\r\n                        const colorString = `${colorPresence.U ? \"U\" : \"\"}${colorPresence.B ? \"B\" : \"\"}${colorPresence.R ? \"R\" : \"\"}${\r\n                            colorPresence.G ? \"G\" : \"\"\r\n                        }${colorPresence.W ? \"W\" : \"\"}`;\r\n                        let colorPrefix = \"\";\r\n                        const useGuildNames = false;\r\n                        const useShardNames = true;\r\n                        switch (colorString.length) {\r\n                            case 0:\r\n                                colorPrefix = `Colorless`;\r\n                                break;\r\n                            case 1:\r\n                                colorPrefix = `Mono-${colorString}`;\r\n                                break;\r\n                            case 2:\r\n                                colorPrefix = useGuildNames ? guildMap[colorString] : colorString;\r\n                                break;\r\n                            case 3:\r\n                                colorPrefix = useShardNames ? shardMap[colorString] : colorString;\r\n                                break;\r\n                            case 4:\r\n                                colorPrefix = colorString;\r\n                                break;\r\n                            case 5:\r\n                                colorPrefix = \"5c\";\r\n                                break;\r\n                        }\r\n                        result.archetype = `${colorPrefix} ${name}`;\r\n                    } else {\r\n                        result.archetype = name;\r\n                    }\r\n                    break; //escape loop\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n        [archetypeRules]\r\n    );\r\n\r\n    const scrape = async () => {\r\n        try {\r\n            if (!wotcUrl) return;\r\n            setIsLoading(true);\r\n            const scrapeResults = await scrapeUrl(wotcUrl);\r\n            if (!scrapeResults) return;\r\n            const namedResults = scrapeResults.deckResults.map((r) => identifyArchetype(r));\r\n            generateCardCounts(namedResults);\r\n            setResultList(namedResults);\r\n            setHasScraped(true);\r\n            setDeckModalOpen(true);\r\n            setIsNumberedResults(wotcUrl.includes(\"champ\") || wotcUrl.includes(\"challenge\") || wotcUrl.includes(\"qualifier\"));\r\n            setIsLoading(false);\r\n        } catch (error) {\r\n            setScrapeError(true);\r\n        }\r\n    };\r\n\r\n    // text generation\r\n    const generatePlaintext = (results: Result[]) => {\r\n        const resultLines = results.map(\r\n            (r) => `${r.archetype ? `${r.archetype} | ` : \"\"}${r.pilot}: <${r.url}>${r.duplicatePilot ? \" (duplicate pilot, link points to other list)\" : \"\"}`\r\n        );\r\n\r\n        const [path] = wotcUrl.split(\"/\").slice(-1);\r\n        const title = path.slice(0, -10);\r\n        const date = path.slice(-10);\r\n        const titleLine = title.replace(/-/g, \" \").replace(/\\w\\S*/g, (txt) => txt.charAt(0).toUpperCase() + txt.slice(1).toLowerCase()) + date;\r\n        return [titleLine, ...resultLines].join(\"\\r\\n\");\r\n    };\r\n\r\n    const generateMarkdownLine = (result: Result): string => {\r\n        const { deck, archetype, pilot, duplicatePilot, url } = result;\r\n\r\n        const muUrl = `[${archetype || \"archetype\"}](${url})`;\r\n        const muPilot = `**${pilot.replace(/[_]/g, \"\\\\_\")}${duplicatePilot ? \" (duplicate pilot, link points to other list)\" : \"\"}**`;\r\n\r\n        const highlights = [...deck.main.filter((c) => c.highlighted), ...deck.sideboard.filter((c) => c.highlighted)].map((c) => c.name);\r\n        const muHighlights = `(${Array.from(new Set(highlights.map((c) => `[[${c}]]`))).join(\", \")})`;\r\n        return `${isNumberedResults ? \"1.\" : \"*\"} ${muUrl}: ${muPilot} ${highlights.length ? muHighlights : \"\"}`;\r\n    };\r\n\r\n    const generateMarkdown = (results: Result[]) => {\r\n        if (!hasScraped) return \"\";\r\n        const resultLines: string[] = [];\r\n        for (const result of results) {\r\n            const muString = generateMarkdownLine(result);\r\n            resultLines.push(muString);\r\n        }\r\n        return [`Full Results: ${wotcUrl || \"\"}`, \"\", ...resultLines, \"\", thx].join(\"\\r\\n\");\r\n    };\r\n\r\n    const copyToClipboard = async (text: string) => {\r\n        if (!navigator.clipboard) {\r\n            return;\r\n        }\r\n        await navigator.clipboard.writeText(text);\r\n    };\r\n\r\n    // filtering\r\n    const deckHasCard = (deck: Deck, filterCards: string[]): boolean => {\r\n        const cards = [...deck.main, ...deck.sideboard];\r\n        if (cards.filter((c) => filterCards.includes(c.name)).length) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    const deckHasExpansion = (deck: Deck, filterExpansions: string[]): boolean => {\r\n        const cards = [...deck.main, ...deck.sideboard];\r\n        const nonBasics = cards.filter(\r\n            (c) =>\r\n                ![\r\n                    \"Plains\",\r\n                    \"Island\",\r\n                    \"Swamp\",\r\n                    \"Mountain\",\r\n                    \"Forest\",\r\n                    \"Snow-Covered Plains\",\r\n                    \"Snow-Covered Island\",\r\n                    \"Snow-Covered Swamp\",\r\n                    \"Snow-Covered Mountain\",\r\n                    \"Snow-Covered Forest\"\r\n                ].includes(c.name)\r\n        );\r\n        const expansions = nonBasics.flatMap((c) => c.info?.printings || []);\r\n        const deduped = [...new Set(expansions)];\r\n\r\n        if (deduped.filter((e) => filterExpansions.includes(e)).length) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    const applyDeckFilters = useCallback(\r\n        (results: Result[]): Result[] => {\r\n            const spicyResults = results.filter((r) => !filterForSpice || r.spicy);\r\n            const faveResults = spicyResults.filter((r) => !filterForFave || r.favorite);\r\n            const expacResults = faveResults.filter((r) => !selectedExpansions.length || deckHasExpansion(r.deck, selectedExpansions));\r\n            const cardResults = expacResults.filter((r) => !selectedCards.length || deckHasCard(r.deck, selectedCards));\r\n            return cardResults;\r\n        },\r\n        [selectedCards, selectedExpansions, filterForFave, filterForSpice]\r\n    );\r\n\r\n    const applyCardFilters = useCallback(\r\n        (cards: CardCount[]): CardCount[] => {\r\n            const filteredBySet = cards.filter(\r\n                (c) => !selectedExpansions.length || c.card.info?.printings.filter((p) => selectedExpansions.includes(p)).length\r\n            );\r\n            const filteredByCard = filteredBySet.filter((c) => !selectedCards.length || selectedCards.includes(c.card.name));\r\n            return filteredByCard;\r\n        },\r\n        [selectedCards, selectedExpansions]\r\n    );\r\n\r\n    const filteredResults = applyDeckFilters(resultList);\r\n    const filteredCardCounts = applyCardFilters(cardCounts);\r\n\r\n    const previewText = textFormat === \"markdown\" ? generateMarkdown(filteredResults) : generatePlaintext(filteredResults);\r\n\r\n    const decksByCard: string = cardCounts\r\n        .filter(\r\n            (c) =>\r\n                ![\r\n                    \"Plains\",\r\n                    \"Island\",\r\n                    \"Swamp\",\r\n                    \"Mountain\",\r\n                    \"Forest\",\r\n                    \"Snow-Covered Plains\",\r\n                    \"Snow-Covered Island\",\r\n                    \"Snow-Covered Swamp\",\r\n                    \"Snow-Covered Mountain\",\r\n                    \"Snow-Covered Forest\"\r\n                ].includes(c.card.name)\r\n        )\r\n        .filter((c) => c.card.info?.printings.includes(setList[0].code) && (showReprints || c.card.info?.printings.length === 1))\r\n        .map((c) => {\r\n            const cardName = `* [[${c.card.name}]]`;\r\n            const urls = resultList\r\n                .filter((r) => deckHasCard(r.deck, [c.card.name]))\r\n                .map((r) => {\r\n                    return `**[${r.archetype || \"archetype\"}](${r.url})**`;\r\n                });\r\n            return `${cardName} ${[...urls].join(\", \")}`;\r\n        })\r\n        .join(\"\\r\\n\");\r\n\r\n    const panes = [\r\n        {\r\n            menuItem: \"Preview\",\r\n            pane: (\r\n                <Tab.Pane key=\"Preview\">\r\n                    <Form>\r\n                        <Form.TextArea value={previewText} style={{ height: 500 }} />\r\n                    </Form>\r\n                </Tab.Pane>\r\n            )\r\n        },\r\n        {\r\n            menuItem: \"Card Counts\",\r\n            pane: (\r\n                <Tab.Pane key=\"Counts\">\r\n                    <Form>\r\n                        <Form.TextArea\r\n                            value={filteredCardCounts\r\n                                .sort((a, b) => b.card.count - a.card.count)\r\n                                .map(\r\n                                    (c) =>\r\n                                        `${c.card.count} cop${c.card.count > 1 ? \"ies\" : \"y\"} of ${c.card.name} in ${c.deckCount} deck${\r\n                                            c.deckCount > 1 ? \"s\" : \"\"\r\n                                        }`\r\n                                )\r\n                                .join(\"\\r\\n\")}\r\n                            style={{ height: 500 }}\r\n                        />\r\n                    </Form>\r\n                </Tab.Pane>\r\n            )\r\n        },\r\n        {\r\n            menuItem: `Decks with ${setList[0].code} Cards`,\r\n            pane: (\r\n                <Tab.Pane key=\"ByCard\">\r\n                    <Form>\r\n                        <Form.Checkbox label=\"Show Reprints?\" checked={!!showReprints} onChange={(e, { checked }) => setShowReprints(!!checked)} />\r\n                        <Form.TextArea style={{ height: 500 }} value={decksByCard} />\r\n                    </Form>\r\n                </Tab.Pane>\r\n            )\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <Container className=\"App\">\r\n            {isLoading && (\r\n                <Dimmer active inverted>\r\n                    <Loader size=\"large\">Loading</Loader>\r\n                </Dimmer>\r\n            )}\r\n            <Header>MTGO Results Scraper</Header>\r\n            <Grid columns={16}>\r\n                <Grid.Row>\r\n                    <Message success>\r\n                        The scraper should be functional, but there will likely be some bugs as the new MTGO team works out issues with their site and I try to\r\n                        keep up. Please <a href=\"https://reddit.com/message/compose/?to=FereMiyJeenyus\">message me on Reddit</a> if you notice anything, and I\r\n                        will fix it as soon as possible.\r\n                        <br />\r\n                        KNOWN ISSUE: Challenges are shown ordered entirely by Swiss standings, instead of by top 8 results and Swiss for players 9-32.\r\n                    </Message>\r\n                </Grid.Row>\r\n                <Grid.Row>\r\n                    <Grid.Column width={3} textAlign=\"left\">\r\n                        <Input value={wotcUrl} onChange={(e) => setWotcUrl(e.target.value)} placeholder=\"Deck Dump URL\" />\r\n                        <a href=\"https://www.mtgo.com/en/mtgo/decklists\" target=\"_blank\" rel=\"noopener noreferrer\" style={{ marginLeft: \"1em\" }}>\r\n                            MTGO Results\r\n                        </a>\r\n                    </Grid.Column>\r\n                    <Grid.Column width={13} textAlign=\"left\">\r\n                        <List horizontal>\r\n                            <List.Item>\r\n                                <Button onClick={scrape} content=\"Scrape\" />\r\n                            </List.Item>\r\n                            <List.Item>\r\n                                <Button onClick={() => setDeckModalOpen(true)} content=\"Decks\" disabled={!hasScraped} />\r\n                            </List.Item>\r\n                        </List>\r\n                    </Grid.Column>\r\n                </Grid.Row>\r\n\r\n                <Grid.Row>\r\n                    <Grid.Column width={16}>\r\n                        <Accordion>\r\n                            <Accordion.Title\r\n                                active={expandOptions}\r\n                                onClick={() => {\r\n                                    setExpandOptions(!expandOptions);\r\n                                }}\r\n                            >\r\n                                <Icon name=\"dropdown\" />\r\n                                <span>Filters and Options (mostly functional, will make it look nicer soon)</span>\r\n                                <div className=\"accordion-title-line\" />\r\n                            </Accordion.Title>\r\n                            <Accordion.Content active={expandOptions}>\r\n                                <Form.Dropdown\r\n                                    label=\"Filter By Card: \"\r\n                                    multiple\r\n                                    clearable\r\n                                    search\r\n                                    selection\r\n                                    lazyLoad\r\n                                    value={selectedCards}\r\n                                    options={cardOptions || []}\r\n                                    onChange={(_e, { value }) => {\r\n                                        setSelectedCards(value as string[]);\r\n                                    }}\r\n                                />\r\n                                <Form.Dropdown\r\n                                    label=\"Filter By Expansion: \"\r\n                                    multiple\r\n                                    clearable\r\n                                    search\r\n                                    selection\r\n                                    value={selectedExpansions}\r\n                                    options={setList.map((s) => ({\r\n                                        key: s.code,\r\n                                        value: s.code,\r\n                                        text: s.name\r\n                                    }))}\r\n                                    onChange={(_e, { value }) => {\r\n                                        setSelectedExpansions(value as string[]);\r\n                                    }}\r\n                                />\r\n                                <Form.Field>Preview Text</Form.Field>\r\n                                <Form.Checkbox\r\n                                    radio\r\n                                    name=\"textFormatRadioGroup\"\r\n                                    label=\"Markdown\"\r\n                                    value={textFormat}\r\n                                    checked={textFormat === \"markdown\"}\r\n                                    onClick={() => setTextFormat(\"markdown\")}\r\n                                />\r\n                                <Form.Checkbox\r\n                                    radio\r\n                                    name=\"textFormatRadioGroup\"\r\n                                    label=\"Plaintext\"\r\n                                    value={textFormat}\r\n                                    checked={textFormat === \"plaintext\"}\r\n                                    onClick={() => setTextFormat(\"plaintext\")}\r\n                                />\r\n                                <Form.Checkbox\r\n                                    toggle\r\n                                    label=\"Marked as Spicy?\"\r\n                                    checked={filterForSpice}\r\n                                    onChange={(_e, { checked }) => setFilterForSpice(!!checked)}\r\n                                />\r\n                                <Form.Checkbox\r\n                                    toggle\r\n                                    label=\"Marked as Favorite?\"\r\n                                    checked={filterForFave}\r\n                                    onChange={(_e, { checked }) => setFilterForFave(!!checked)}\r\n                                />\r\n                            </Accordion.Content>\r\n                        </Accordion>\r\n                    </Grid.Column>\r\n                </Grid.Row>\r\n\r\n                <Grid.Row>\r\n                    <Grid.Column width={16}>\r\n                        {scrapeError && (\r\n                            <Message negative>\r\n                                <p>There was an error while attempting to scrape results. Please try again later</p>\r\n                            </Message>\r\n                        )}\r\n                        <Tab panes={panes} renderActiveOnly={false} />\r\n                    </Grid.Column>\r\n                </Grid.Row>\r\n                <Grid.Row>\r\n                    <Button\r\n                        onClick={() => {\r\n                            copyToClipboard(generatePlaintext(filteredResults));\r\n                        }}\r\n                        content=\"Copy Plaintext\"\r\n                    />\r\n                    <Button\r\n                        onClick={() => {\r\n                            copyToClipboard(generateMarkdown(filteredResults));\r\n                        }}\r\n                        content=\"Copy Markdown\"\r\n                    />\r\n                </Grid.Row>\r\n            </Grid>\r\n            <DeckDetailModal\r\n                open={deckModalOpen && !!resultList?.length}\r\n                onClose={() => setDeckModalOpen(false)}\r\n                results={resultList}\r\n                setResults={setResultList}\r\n            />\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React, { useState } from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { Container, Menu } from \"semantic-ui-react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst NavBar: React.FC = () => {\r\n    const [path, setPath] = useState<string>(window.location.pathname);\r\n\r\n    return (\r\n        <Menu size=\"large\">\r\n            <Container>\r\n                <Menu.Item as={Link} to={\"/mtgo-results-scraper\"} active={path === \"/mtgo-results-scraper\"} onClick={() => setPath(\"/mtgo-results-scraper\")}>\r\n                    Home\r\n                </Menu.Item>\r\n                <Menu.Item\r\n                    as={Link}\r\n                    to={\"/mtgo-results-scraper/archetypes\"}\r\n                    active={path === \"/mtgo-results-scraper/archetypes\"}\r\n                    onClick={() => setPath(\"/mtgo-results-scraper/archetypes\")}\r\n                >\r\n                    Archetypes\r\n                </Menu.Item>\r\n                <Menu.Item\r\n                    as={Link}\r\n                    to={\"/mtgo-results-scraper/mass-entry\"}\r\n                    active={path === \"/mtgo-results-scraper/mass-entry\"}\r\n                    onClick={() => setPath(\"/mtgo-results-scraper/mass-entry\")}\r\n                >\r\n                    Mass Entry\r\n                </Menu.Item>\r\n                <Menu.Item\r\n                    as={Link}\r\n                    to={\"/mtgo-results-scraper/about\"}\r\n                    active={path === \"/mtgo-results-scraper/about\"}\r\n                    onClick={() => setPath(\"/mtgo-results-scraper/about\")}\r\n                >\r\n                    About\r\n                </Menu.Item>\r\n            </Container>\r\n        </Menu>\r\n    );\r\n};\r\n\r\nexport default NavBar;\r\n","import React from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { List, Container, ListItem } from \"semantic-ui-react\";\r\n\r\nconst About: React.FC = () => {\r\n    return (\r\n        <List>\r\n            <List.Item>\r\n                <List.Header>What am I looking at?</List.Header>\r\n                <Container style={{ padding: \"0.5em 1.25em 0.25em\" }}>\r\n                    This is a web tool for scraping Wizards of the Coast&apos;s MTGO results posts and formatting the contents for a Reddit post (or anywhere\r\n                    else that supports Markdown)\r\n                </Container>\r\n            </List.Item>\r\n            <List.Item>\r\n                <List.Header>How do I use it?</List.Header>\r\n                <Container style={{ paddingLeft: \"1em\" }}>\r\n                    <List ordered>\r\n                        <ListItem>Paste the url for a WotC deck dump in the little box and click &apos;Scrape.&apos;</ListItem>\r\n                        <ListItem>\r\n                            Create archetype definition rules (they&apos;ll be saved locally for next time you use this site from your current device).\r\n                        </ListItem>\r\n                        <ListItem>\r\n                            Click &apos;Decks&apos; to view the decklists. From there, you can tweak the archetype names and click cards to highlight them.\r\n                        </ListItem>\r\n                        <ListItem>\r\n                            Copy the resulting text into your Reddit post. Be sure you&apos;re in &apos;Markdown Mode&apos; or your links will get ugly.\r\n                        </ListItem>\r\n                    </List>\r\n                </Container>\r\n            </List.Item>\r\n            <List.Item>\r\n                <List.Header>How does the archetype definition stuff work?</List.Header>\r\n                <Container style={{ padding: \"0.5em 1.25em 0.25em\" }}>\r\n                    For each deck in the scraped results, it checks for the presence and count of each named card in the location specified. &apos;At Most:\r\n                    0&apos; will override &apos;At Least,&apos; but other contradictory rules will simply fail to match. If a deck matches all the rules in an\r\n                    archetype definitions, it adds that archetype name and optionally prefixes the colors (ignoring hybrid and Phyrexian mana costs). Note that\r\n                    it stops checking once an archetype definition applies, so try to put more general definitions toward the end of the list.\r\n                </Container>\r\n                <Container style={{ padding: \"0.5em 1.25em 0.25em\" }}>\r\n                    Your definitions are stored in your browser&apos;s local storage in a JSON array, accessible and editable through your browser&apos;s dev\r\n                    tools. I&apos;m planning on adding import and export options, and bugging some users for their definitions once the feature is more\r\n                    battle-tested.\r\n                </Container>\r\n            </List.Item>\r\n            <List.Item>\r\n                <List.Header>How can I report a bug or suggest a feature?</List.Header>\r\n                <Container style={{ padding: \"0.5em 1.25em \" }}>\r\n                    Message me on Reddit: <a href=\"https://reddit.com/message/compose/?to=FereMiyJeenyus\">/u/FereMiyJeenyus</a>\r\n                </Container>\r\n            </List.Item>\r\n        </List>\r\n    );\r\n};\r\n\r\nexport default About;\r\n","import React from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { Button, Form, Container, DropdownItemProps, Grid } from \"semantic-ui-react\";\r\nimport { Rule } from \"../../types\";\r\n\r\ninterface RuleFormProps {\r\n    rule: Rule;\r\n    index: number;\r\n    updateRule(rule: Rule, index: number): void;\r\n    removeRule(index: number): void;\r\n    cardOptions: DropdownItemProps[];\r\n}\r\n\r\nconst RuleForm: React.FC<RuleFormProps> = (props: RuleFormProps) => {\r\n    const { rule, index, updateRule, removeRule, cardOptions } = props;\r\n\r\n    return (\r\n        <>\r\n            <Grid.Column width={4}>\r\n                {rule.cardName ? (\r\n                    <Container>\r\n                        Card Name\r\n                        <br />\r\n                        <strong style={{ display: \"block\", marginTop: \"0.5em\" }}>{rule.cardName}</strong>\r\n                    </Container>\r\n                ) : (\r\n                    <Form.Dropdown\r\n                        label=\"Card Name\"\r\n                        selection\r\n                        search\r\n                        lazyLoad\r\n                        minCharacters={3}\r\n                        value={rule.cardName}\r\n                        options={cardOptions}\r\n                        onChange={(_e, { value }) => {\r\n                            updateRule({ ...rule, cardName: value as string }, index);\r\n                        }}\r\n                    />\r\n                )}\r\n            </Grid.Column>\r\n            <Grid.Column width={2}>\r\n                <Form.Dropdown\r\n                    label=\"At Least\"\r\n                    fluid\r\n                    selection\r\n                    clearable\r\n                    value={rule.atLeast}\r\n                    options={[\r\n                        { key: 1, text: 1, value: 1 },\r\n                        { key: 2, text: 2, value: 2 },\r\n                        { key: 3, text: 3, value: 3 },\r\n                        { key: 4, text: 4, value: 4 }\r\n                    ]}\r\n                    onChange={(_e, { value }) => updateRule({ ...rule, atLeast: value !== \"\" ? (value as number) : undefined }, index)}\r\n                />\r\n            </Grid.Column>\r\n            <Grid.Column width={2}>\r\n                <Form.Dropdown\r\n                    label=\"At Most\"\r\n                    fluid\r\n                    selection\r\n                    clearable\r\n                    value={rule.atMost}\r\n                    options={[\r\n                        { key: 0, text: 0, value: 0 },\r\n                        { key: 1, text: 1, value: 1 },\r\n                        { key: 2, text: 2, value: 2 },\r\n                        { key: 3, text: 3, value: 3 }\r\n                    ]}\r\n                    onChange={(_e, { value }) => updateRule({ ...rule, atMost: value !== \"\" ? (value as number) : undefined }, index)}\r\n                />\r\n            </Grid.Column>\r\n            <Grid.Column width={3}>\r\n                <Form.Dropdown\r\n                    label=\"In\"\r\n                    fluid\r\n                    selection\r\n                    value={rule.in}\r\n                    options={[\r\n                        { key: 0, text: \"Main\", value: \"main\" },\r\n                        { key: 1, text: \"Sideboard\", value: \"side\" },\r\n                        { key: 2, text: \"Either\", value: \"both\" }\r\n                    ]}\r\n                    onChange={(_e, { value }) => updateRule({ ...rule, in: value as \"main\" | \"side\" | \"both\" }, index)}\r\n                />\r\n            </Grid.Column>\r\n            <Grid.Column width={1} textAlign=\"right\">\r\n                <Button\r\n                    style={{ marginTop: \"1.4em\" }}\r\n                    icon=\"trash\"\r\n                    onClick={() => {\r\n                        removeRule(index);\r\n                    }}\r\n                />\r\n            </Grid.Column>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default RuleForm;\r\n","import React from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { DropdownItemProps, Checkbox, Grid, Input, Button } from \"semantic-ui-react\";\r\nimport RuleForm from \"./RuleForm\";\r\nimport { Archetype, Rule } from \"../../types\";\r\n\r\ninterface ArchetypeViewProps {\r\n    archetype: Archetype;\r\n    updateArchetype(archetype: Archetype): void;\r\n    cardOptions: DropdownItemProps[];\r\n}\r\n\r\nconst ArchetypeView: React.FC<ArchetypeViewProps> = (props: ArchetypeViewProps) => {\r\n    const { archetype, updateArchetype, cardOptions } = props;\r\n\r\n    const updateRule = (rule: Rule, index: number) => {\r\n        const newRules = [...archetype.rules];\r\n        newRules[index] = rule;\r\n        updateArchetype({ ...archetype, rules: newRules });\r\n    };\r\n\r\n    const addRule = () => {\r\n        const newRules = [...archetype.rules, { cardName: \"\", in: \"main\" } as Rule];\r\n        updateArchetype({ ...archetype, rules: newRules });\r\n    };\r\n\r\n    const removeRule = (index: number) => {\r\n        const newRules = [...archetype.rules];\r\n        newRules.splice(index, 1);\r\n        updateArchetype({ ...archetype, rules: newRules });\r\n    };\r\n\r\n    return (\r\n        <Grid divided=\"vertically\">\r\n            <Grid.Row verticalAlign=\"middle\">\r\n                <Grid.Column width={4}>\r\n                    <Input\r\n                        value={archetype.name}\r\n                        placeholder=\"Archetype Name\"\r\n                        onChange={(e) => {\r\n                            updateArchetype({ ...archetype, name: e.target.value });\r\n                        }}\r\n                    />\r\n                </Grid.Column>\r\n                <Grid.Column width={4}>\r\n                    <Checkbox\r\n                        toggle\r\n                        label=\"Add Color Prefix?\"\r\n                        checked={archetype.prefixColors}\r\n                        onChange={(e, { checked }) => {\r\n                            updateArchetype({ ...archetype, prefixColors: checked });\r\n                        }}\r\n                    />\r\n                </Grid.Column>\r\n            </Grid.Row>\r\n\r\n            {archetype.rules.map((r, i) => {\r\n                return (\r\n                    <Grid.Row key={r.cardName}>\r\n                        <RuleForm rule={r} index={i} updateRule={updateRule} removeRule={removeRule} cardOptions={cardOptions} />\r\n                    </Grid.Row>\r\n                );\r\n            })}\r\n            <Grid.Row>\r\n                <Grid.Column>\r\n                    <Button icon=\"plus\" content=\"Add Card Rule\" onClick={addRule} />\r\n                </Grid.Column>\r\n            </Grid.Row>\r\n        </Grid>\r\n    );\r\n};\r\n\r\nexport default ArchetypeView;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, Modal } from \"semantic-ui-react\";\r\nimport ArchetypeView from \"./ArchetypeView\";\r\nimport { Archetype } from \"../../types\";\r\nimport cardInfo from \"../../resources/cardInfo.json\";\r\n\r\ninterface EditArchetypeModalProps {\r\n    open: boolean;\r\n    onClose(): void;\r\n    archetype?: Archetype;\r\n    updateArchetype(archetype: Archetype): void;\r\n}\r\nconst cardOptions = Object.keys(cardInfo).map((card) => ({ key: card, text: card, value: card }));\r\n\r\nconst EditArchetypeModal: React.FC<EditArchetypeModalProps> = (props: EditArchetypeModalProps) => {\r\n    const { archetype, updateArchetype, open, onClose } = props;\r\n    const [localArchetype, setLocalArchetype] = useState<Archetype>();\r\n\r\n    useEffect(() => {\r\n        if (!archetype) return;\r\n        setLocalArchetype({ ...archetype } || { id: 999, name: \"\", rules: [] });\r\n    }, [archetype]);\r\n\r\n    const handleSave = () => {\r\n        if (localArchetype) {\r\n            updateArchetype(localArchetype);\r\n        }\r\n        setLocalArchetype(undefined);\r\n        onClose();\r\n    };\r\n    return (\r\n        <Modal open={open} onClose={onClose}>\r\n            <Modal.Content>\r\n                {localArchetype && <ArchetypeView archetype={localArchetype} updateArchetype={setLocalArchetype} cardOptions={cardOptions} />}\r\n            </Modal.Content>\r\n            <Modal.Actions>\r\n                <Button content=\"Save\" onClick={handleSave} />\r\n                <Button content=\"Cancel\" onClick={onClose} />\r\n            </Modal.Actions>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default EditArchetypeModal;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { Button, Header, Dropdown, Container, List, Ref, Modal } from \"semantic-ui-react\";\r\nimport { Archetype, Metagame } from \"../../types\";\r\nimport { DragDropContext, Draggable, Droppable, DropResult } from \"react-beautiful-dnd\";\r\nimport EditArchetypeModal from \"./EditArchetypeModal\";\r\n\r\nconst reorder = (list: any[], startIndex: number, endIndex: number) => {\r\n    const result = [...list];\r\n    const [removed] = result.splice(startIndex, 1);\r\n    result.splice(endIndex, 0, removed);\r\n\r\n    return result;\r\n};\r\n\r\nconst formatDropdownOptions = [\r\n    { key: \"modern\", text: \"Modern\", value: \"modern\" },\r\n    { key: \"pioneer\", text: \"Pioneer\", value: \"pioneer\" },\r\n    { key: \"legacy\", text: \"Legacy\", value: \"legacy\" },\r\n    { key: \"vintage\", text: \"Vintage\", value: \"vintage\" },\r\n    { key: \"standard\", text: \"Standard\", value: \"standard\" }\r\n];\r\n\r\nconst ArchetypePage: React.FC = () => {\r\n    const [archetypeRules, setArchetypeRules] = useState<Archetype[]>([]);\r\n    const [selectedFormat, setSelectedFormat] = useState<string>(\"\");\r\n    const [selectedArchetype, setSelectedArchetype] = useState<Archetype>();\r\n    const [editModalOpen, setEditModalOpen] = useState<boolean>(false);\r\n    const [oldArchetypeModalOpen, setOldArchtypeModalOpen] = useState<boolean>(false);\r\n\r\n    useEffect(() => {\r\n        const rulesFromStorage = window.localStorage?.getItem(\"archetypeRules\");\r\n        if (rulesFromStorage && rulesFromStorage !== \"undefined\") {\r\n            setArchetypeRules(JSON.parse(rulesFromStorage));\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        window.localStorage?.setItem(\"archetypeRules\", JSON.stringify(archetypeRules));\r\n    }, [archetypeRules]);\r\n\r\n    const updateArchetype = (archetype: Archetype) => {\r\n        const newArchetypes = [...archetypeRules];\r\n        const index = archetypeRules.findIndex((a) => a.id === archetype.id);\r\n        if (index > -1) newArchetypes[index] = archetype;\r\n        else newArchetypes.push(archetype);\r\n        setArchetypeRules(newArchetypes);\r\n    };\r\n\r\n    const addArchetype = () => {\r\n        let id = 0;\r\n        archetypeRules.forEach((a) => {\r\n            if (a.id > id) id = a.id;\r\n        });\r\n        setEditModalOpen(true);\r\n        setSelectedArchetype({ id: id + 1, name: \"\", rules: [] });\r\n    };\r\n\r\n    const handleDragEnd = (result: DropResult) => {\r\n        if (!result.destination) {\r\n            return;\r\n        }\r\n        const items = reorder(archetypeRules, result.source.index, result.destination.index);\r\n\r\n        setArchetypeRules(items);\r\n    };\r\n\r\n    const handleDeleteClick = (archetype: Archetype) => {\r\n        const newArchetypes = [...archetypeRules];\r\n        const index = newArchetypes.findIndex((a) => a.id === archetype.id);\r\n        if (index > -1) {\r\n            newArchetypes.splice(index, 1);\r\n        }\r\n        setArchetypeRules(newArchetypes);\r\n    };\r\n\r\n    const handleEditClick = (archetype: Archetype) => {\r\n        setSelectedArchetype(archetype);\r\n        setEditModalOpen(true);\r\n    };\r\n\r\n    const onEditModalClose = () => {\r\n        setEditModalOpen(false);\r\n    };\r\n\r\n    return (\r\n        <Container>\r\n            <Header>Archetype Definitions (this is super beta, let me know if anything breaks)</Header>\r\n            <Dropdown\r\n                selection\r\n                placeholder=\"Select a format...\"\r\n                options={formatDropdownOptions}\r\n                value={selectedFormat}\r\n                onChange={(e, data) => setSelectedFormat(data.value as string)}\r\n            />\r\n            <DragDropContext onDragEnd={handleDragEnd}>\r\n                <Droppable droppableId=\"droppable\">\r\n                    {(provided) => (\r\n                        <Ref innerRef={provided.innerRef}>\r\n                            <List divided verticalAlign=\"middle\" {...provided.droppableProps}>\r\n                                {archetypeRules.map((item, index) => (\r\n                                    <Draggable key={item.id} draggableId={item.id.toString()} index={index}>\r\n                                        {(provided) => (\r\n                                            <Ref innerRef={provided.innerRef}>\r\n                                                <List.Item {...provided.draggableProps} {...provided.dragHandleProps}>\r\n                                                    <List.Content floated=\"right\">\r\n                                                        <Button content=\"Delete\" onClick={() => handleDeleteClick(item)} />\r\n                                                    </List.Content>\r\n                                                    <List.Content floated=\"right\">\r\n                                                        <Button content=\"Edit\" onClick={() => handleEditClick(item)} />\r\n                                                    </List.Content>\r\n                                                    <List.Content verticalAlign=\"middle\">\r\n                                                        <Header>{item.name}</Header>\r\n                                                    </List.Content>\r\n                                                </List.Item>\r\n                                            </Ref>\r\n                                        )}\r\n                                    </Draggable>\r\n                                ))}\r\n                                {provided.placeholder}\r\n                            </List>\r\n                        </Ref>\r\n                    )}\r\n                </Droppable>\r\n            </DragDropContext>\r\n            <Button icon=\"plus\" content=\"Create New Archetype Definition\" floated=\"left\" onClick={() => addArchetype()} />\r\n            <Button color=\"blue\" content=\"Save and Apply\" />\r\n            <EditArchetypeModal open={editModalOpen} onClose={onEditModalClose} archetype={selectedArchetype} updateArchetype={updateArchetype} />\r\n            <Modal open={oldArchetypeModalOpen} onClose={() => setOldArchtypeModalOpen(false)}></Modal>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default ArchetypePage;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { ScrapeResult } from \"./types\";\r\n\r\nexport const scrapeResultSlice = createSlice({\r\n    name: \"scrapeResults\",\r\n    initialState: {\r\n        scrapeResults: [] as ScrapeResult[]\r\n    },\r\n    reducers: {\r\n        pushScrapeResult: (state, action) => {\r\n            state.scrapeResults.push(action.payload);\r\n        },\r\n        updateScrapeResult: (state, action) => {\r\n            const results = [...state.scrapeResults];\r\n            results[action.payload.id] = action.payload;\r\n            state.scrapeResults = results;\r\n        },\r\n        clearResults: (state) => {\r\n            state.scrapeResults = [];\r\n        }\r\n    }\r\n});\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const { pushScrapeResult, updateScrapeResult, clearResults } = scrapeResultSlice.actions;\r\n\r\nexport const selectScrapeResults = (state: { scrapeResults: ScrapeResult[] }): ScrapeResult[] => state.scrapeResults;\r\nexport default scrapeResultSlice.reducer;\r\n","import React, { useState } from \"react\";\r\nimport { Button, Container, List, Message } from \"semantic-ui-react\";\r\nimport DeckList from \"../DeckList\";\r\nimport { Result, ScrapeResult, thx } from \"../types\";\r\nimport { updateScrapeResult } from \"../scrapeResultSlice\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\ninterface ResultDisplayProps {\r\n    scrapeResult: ScrapeResult;\r\n}\r\n\r\nconst ResultDisplay: React.FC<ResultDisplayProps> = (props: ResultDisplayProps) => {\r\n    const { scrapeResult } = props;\r\n    const { eventType, eventDate, deckResults } = scrapeResult;\r\n    const dispatch = useDispatch();\r\n\r\n    const [copyMessageVisible, setCopyMessageVisible] = useState<boolean>(false);\r\n\r\n    const copyToClipboard = async (text: string) => {\r\n        if (!navigator.clipboard) {\r\n            return;\r\n        }\r\n        await navigator.clipboard.writeText(text);\r\n    };\r\n\r\n    const generateMarkdown = () => {\r\n        const resultLines: string[] = [];\r\n        for (const result of deckResults) {\r\n            const { deck, archetype, pilot, duplicatePilot, url } = result;\r\n\r\n            const muUrl = `[${archetype || \"archetype\"}](${url})`;\r\n            const muPilot = `**${pilot.replace(/[_]/g, \"\\\\_\")}${duplicatePilot ? \" (duplicate pilot, link points to other list)\" : \"\"}**`;\r\n\r\n            const highlights = [...deck.main.filter((c) => c.highlighted), ...deck.sideboard.filter((c) => c.highlighted)].map((c) => c.name);\r\n            const muHighlights = `(${Array.from(new Set(highlights.map((c) => `[[${c}]]`))).join(\", \")})`;\r\n            const muString = `${scrapeResult.numbered ? \"1.\" : \"*\"} ${muUrl}: ${muPilot} ${highlights.length ? muHighlights : \"\"}`;\r\n            resultLines.push(muString);\r\n        }\r\n        return [`Full Results: ${scrapeResult.mtgoUrl || \"\"}`, \"\", ...resultLines, \"\", thx].join(\"\\r\\n\");\r\n    };\r\n\r\n    const handleMarkdownClick = async () => {\r\n        const text = generateMarkdown();\r\n        await copyToClipboard(text);\r\n        setCopyMessageVisible(true);\r\n        setTimeout(() => {\r\n            setCopyMessageVisible(false);\r\n        }, 3000);\r\n    };\r\n\r\n    const updateDeck = (deckResult: Result) => {\r\n        const res = [...scrapeResult.deckResults];\r\n        const index = res.findIndex((r) => r.id === deckResult.id);\r\n        res[index] = deckResult;\r\n        dispatch(updateScrapeResult({ ...scrapeResult, deckResults: res }));\r\n    };\r\n\r\n    return (\r\n        <Container>\r\n            <List>\r\n                <List.Item>\r\n                    <List.Content floated=\"right\">\r\n                        <Button content=\"Copy Markdown\" onClick={handleMarkdownClick} />\r\n                    </List.Content>\r\n                    <List.Content floated=\"right\">\r\n                        <Message success floating content=\"Copied to clipboard!\" hidden={!copyMessageVisible} onDismiss={() => setCopyMessageVisible(false)} />\r\n                    </List.Content>\r\n                    <List.Content>\r\n                        {eventType} {eventDate}\r\n                    </List.Content>\r\n                </List.Item>\r\n            </List>\r\n            {deckResults.map((d, i) => (\r\n                <DeckList key={i} result={d} updateDeck={updateDeck} />\r\n            ))}\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default ResultDisplay;\r\n","import React, { useState } from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { Button, Dimmer, Form, Grid, Header, List, Loader, Message, TextArea } from \"semantic-ui-react\";\r\nimport { identifyArchetype, scrapeUrl } from \"../lib\";\r\nimport { Archetype } from \"../types\";\r\nimport ResultDisplay from \"./ResultDisplay\";\r\nimport { clearResults, pushScrapeResult, selectScrapeResults } from \"../scrapeResultSlice\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nconst ScraperForm: React.FC = () => {\r\n    const [urls, setUrls] = useState<string>(\"\");\r\n    const [isLoading, setIsLoading] = useState<boolean>(false);\r\n    const scrapeResults = useSelector(selectScrapeResults);\r\n    const dispatch = useDispatch();\r\n\r\n    const scrapeUrls = async () => {\r\n        dispatch(clearResults());\r\n        const splitUrls = urls.split(\";\").map((s) => s.trim());\r\n        for (let index = 0; index < splitUrls.length; index++) {\r\n            const url = splitUrls[index];\r\n            try {\r\n                if (!url?.startsWith(\"https://www.mtgo.com\")) return;\r\n                setIsLoading(true);\r\n                const scrape = await scrapeUrl(url);\r\n                if (!scrape) return;\r\n\r\n                const rulesFromStorage = window.localStorage?.getItem(\"archetypeRules\");\r\n                let archetypeRules: Archetype[] = [];\r\n                if (rulesFromStorage && rulesFromStorage !== \"undefined\") {\r\n                    archetypeRules = JSON.parse(rulesFromStorage);\r\n                }\r\n                const namedResults = scrape?.deckResults.map((r) => identifyArchetype(r, archetypeRules));\r\n\r\n                dispatch(pushScrapeResult({ ...scrape, deckResults: namedResults, id: index }));\r\n            } catch (error) {\r\n                console.error(error);\r\n            }\r\n        }\r\n        setIsLoading(false);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {isLoading && (\r\n                <Dimmer active inverted>\r\n                    <Loader size=\"large\">Loading</Loader>\r\n                </Dimmer>\r\n            )}\r\n            <Header>MTGO Results Scraper</Header>\r\n            <Grid columns={16}>\r\n                <Grid.Row>\r\n                    <Message success>\r\n                        The scraper should be functional, but there will likely be some bugs as the new MTGO team works out issues with their site and I try to\r\n                        keep up. Please <a href=\"https://reddit.com/message/compose/?to=FereMiyJeenyus\">message me on Reddit</a> if you notice anything, and I\r\n                        will fix it as soon as possible.\r\n                        <br />\r\n                        KNOWN ISSUE: Challenges are shown ordered entirely by Swiss standings, instead of by top 8 results and Swiss for players 9-32.\r\n                    </Message>\r\n                </Grid.Row>\r\n                <Grid.Row>\r\n                    <Grid.Column width={8} textAlign=\"left\">\r\n                        <Form>\r\n                            <TextArea value={urls} onInput={(e, data) => setUrls(data.value as string)} placeholder=\"Deck Dump URLs, separated by semicolons\" />\r\n                        </Form>\r\n                        <a href=\"https://www.mtgo.com/en/mtgo/decklists\" target=\"_blank\" rel=\"noopener noreferrer\" style={{ marginLeft: \"1em\" }}>\r\n                            MTGO Results\r\n                        </a>\r\n                    </Grid.Column>\r\n                    <Grid.Column width={8} textAlign=\"left\">\r\n                        <List horizontal>\r\n                            <List.Item>\r\n                                <Button onClick={scrapeUrls} content=\"Scrape\" />\r\n                            </List.Item>\r\n                        </List>\r\n                    </Grid.Column>\r\n                </Grid.Row>\r\n                {!!scrapeResults.length &&\r\n                    scrapeResults.map((r, i) => (\r\n                        <Grid.Row key={i}>\r\n                            <ResultDisplay scrapeResult={r} />\r\n                        </Grid.Row>\r\n                    ))}\r\n            </Grid>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ScraperForm;\r\n","import React from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport \"./App.css\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport OldApp from \"./OldApp\";\r\nimport NavBar from \"./components/NavBar\";\r\nimport About from \"./components/About\";\r\nimport { Container } from \"semantic-ui-react\";\r\nimport Archetypes from \"./components/archetypes/Archetypes\";\r\nimport ScraperForm from \"./components/ScraperForm\";\r\n\r\nconst App: React.FC = () => {\r\n    return (\r\n        <Router>\r\n            <NavBar />\r\n            <Container>\r\n                <Switch>\r\n                    <Route path=\"/mtgo-results-scraper/archetypes\">\r\n                        <Archetypes />\r\n                    </Route>\r\n                    <Route path=\"/mtgo-results-scraper/about\">\r\n                        <About />\r\n                    </Route>\r\n                    <Route path=\"/mtgo-results-scraper/mass-entry\">\r\n                        <ScraperForm />\r\n                    </Route>\r\n                    <Route path=\"/mtgo-results-scraper\">\r\n                        <OldApp />\r\n                    </Route>\r\n                    <Route path=\"/\">\r\n                        <OldApp />\r\n                    </Route>\r\n                </Switch>\r\n            </Container>\r\n        </Router>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n    window.location.hostname === \"localhost\" ||\r\n        // [::1] is the IPv6 localhost address.\r\n        window.location.hostname === \"[::1]\" ||\r\n        // 127.0.0.0/8 are considered localhost for IPv4.\r\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\ntype Config = {\r\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n    if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n        // The URL constructor is available in all browsers that support SW.\r\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n        if (publicUrl.origin !== window.location.origin) {\r\n            // Our service worker won't work if PUBLIC_URL is on a different origin\r\n            // from what our page is served on. This might happen if a CDN is used to\r\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n            return;\r\n        }\r\n\r\n        window.addEventListener(\"load\", () => {\r\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n            if (isLocalhost) {\r\n                // This is running on localhost. Let's check if a service worker still exists or not.\r\n                checkValidServiceWorker(swUrl, config);\r\n\r\n                // Add some additional logging to localhost, pointing developers to the\r\n                // service worker/PWA documentation.\r\n                navigator.serviceWorker.ready.then(() => {\r\n                    console.log(\"This web app is being served cache-first by a service \" + \"worker. To learn more, visit https://bit.ly/CRA-PWA\");\r\n                });\r\n            } else {\r\n                // Is not localhost. Just register service worker\r\n                registerValidSW(swUrl, config);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n    navigator.serviceWorker\r\n        .register(swUrl)\r\n        .then((registration) => {\r\n            registration.onupdatefound = () => {\r\n                const installingWorker = registration.installing;\r\n                if (installingWorker == null) {\r\n                    return;\r\n                }\r\n                installingWorker.onstatechange = () => {\r\n                    if (installingWorker.state === \"installed\") {\r\n                        if (navigator.serviceWorker.controller) {\r\n                            // At this point, the updated precached content has been fetched,\r\n                            // but the previous service worker will still serve the older\r\n                            // content until all client tabs are closed.\r\n                            console.log(\"New content is available and will be used when all \" + \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\");\r\n\r\n                            // Execute callback\r\n                            if (config && config.onUpdate) {\r\n                                config.onUpdate(registration);\r\n                            }\r\n                        } else {\r\n                            // At this point, everything has been precached.\r\n                            // It's the perfect time to display a\r\n                            // \"Content is cached for offline use.\" message.\r\n                            console.log(\"Content is cached for offline use.\");\r\n\r\n                            // Execute callback\r\n                            if (config && config.onSuccess) {\r\n                                config.onSuccess(registration);\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n            };\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Error during service worker registration:\", error);\r\n        });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n    // Check if the service worker can be found. If it can't reload the page.\r\n    fetch(swUrl, {\r\n        headers: { \"Service-Worker\": \"script\" }\r\n    })\r\n        .then((response) => {\r\n            // Ensure service worker exists, and that we really are getting a JS file.\r\n            const contentType = response.headers.get(\"content-type\");\r\n            if (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\r\n                // No service worker found. Probably a different app. Reload the page.\r\n                navigator.serviceWorker.ready.then((registration) => {\r\n                    registration.unregister().then(() => {\r\n                        window.location.reload();\r\n                    });\r\n                });\r\n            } else {\r\n                // Service worker found. Proceed as normal.\r\n                registerValidSW(swUrl, config);\r\n            }\r\n        })\r\n        .catch(() => {\r\n            console.log(\"No internet connection found. App is running in offline mode.\");\r\n        });\r\n}\r\n\r\nexport function unregister() {\r\n    if (\"serviceWorker\" in navigator) {\r\n        navigator.serviceWorker.ready\r\n            .then((registration) => {\r\n                registration.unregister();\r\n            })\r\n            .catch((error) => {\r\n                console.error(error.message);\r\n            });\r\n    }\r\n}\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport scrapeResultReducer from \"./scrapeResultSlice\";\r\n\r\nexport default configureStore({\r\n    reducer: scrapeResultReducer\r\n});\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./store\";\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider>,\r\n    document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}