{"version":3,"sources":["types.ts","scraper.ts","CardItem.tsx","DeckList.tsx","DeckDetailModal.tsx","InfoModal.tsx","RuleForm.tsx","ArchetypeView.tsx","RulesModal.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["guildMap","shardMap","regex","spaces","getDecksFromUrl","wotcUrl","a","results","startsWith","fetch","response","text","body","$","cheerio","usernames","each","index","dg","headerContent","find","username","split","duplicatePilot","includes","push","parts","name","chaff","replace","toLowerCase","url","deck","main","sideboard","row","trim","info","cardInfo","count","parseInt","highlighted","pilot","archetype","favorite","spicy","console","log","setList","code","colorMap","W","undefined","U","B","R","G","M","C","CardItem","props","cardColor","otherHalfColor","card","toggleCardHighlight","costIcons","colors","manaCost","length","otherHalf","slice","forEach","pip","List","Item","style","marginLeft","paddingTop","content","symbol","shadow","onClick","className","Popup","trigger","Content","color","Header","Meta","type","Description","whiteSpace","power","toughness","extra","padding","float","fontWeight","faceName","colorLabels","typeLabels","colorColors","typeColors","DeckList","result","updateDeck","useState","colorCount","setColorCount","typeCount","setTypeCount","useEffect","wCount","uCount","bCount","rCount","gCount","cCount","creatures","noncreatures","lands","types","c","Planeswalkers","Creatures","Instants","Sorceries","Artifacts","Enchantments","Lands","Unknown","side","Companion","Grid","width","padded","Row","Column","marginBottom","textAlign","Icon","size","marginTop","Object","keys","filter","key","map","Container","data","labels","datasets","backgroundColor","options","title","display","legend","label","position","cutoutPercentage","DeckDetailModal","setResults","open","onClose","displayedDeckIndex","setDisplayedDeckIndex","resultCount","goToNextDeck","displayedDeck","res","updateDisplayedDeck","Modal","top","left","closeOnDimmerClick","closeIcon","verticalAlign","Input","value","onChange","e","onKeyPress","Checkbox","checked","Button","InfoModal","centered","paddingLeft","ordered","ListItem","href","RuleForm","rule","updateRule","removeRule","cardOptions","cardName","Form","Dropdown","selection","search","lazyLoad","minCharacters","_e","fluid","clearable","atLeast","atMost","in","icon","ArchetypeView","updateArchetype","newRules","rules","splice","divided","placeholder","target","toggle","prefixColors","r","i","RulesModal","archetypeRules","setArchetypeRules","activeIndex","setActiveIndex","newArchetypes","findIndex","id","Accordion","Title","active","Actions","floated","App","hasScraped","setHasScraped","setWotcUrl","isLoading","setIsLoading","resultList","setResultList","selectedCards","setSelectedCards","cardCounts","setCardCounts","selectedExpansions","setSelectedExpansions","deckModalOpen","setDeckModalOpen","infoModalOpen","setInfoModalOpen","scrapeError","setScrapeError","isNumberedResults","setIsNumberedResults","expandOptions","setExpandOptions","textFormat","setTextFormat","filterForSpice","setFilterForSpice","filterForFave","setFilterForFave","rulesModalOpen","setRulesModalOpen","setCardOptions","rulesFromStorage","window","localStorage","getItem","JSON","parse","setItem","stringify","generateCardCounts","counts","countRow","deckCount","sort","b","identifyArchetype","useCallback","combinedCards","mb","isMatch","cardSet","some","deckFitsRule","reduce","colorString","colorPrefix","scrape","scrapedResults","namedResults","generatePlaintext","resultLines","path","date","txt","charAt","toUpperCase","join","generateMarkdownLine","muUrl","muPilot","highlights","muHighlights","Array","from","Set","generateMarkdown","muString","copyToClipboard","navigator","clipboard","writeText","deckHasCard","filterCards","applyDeckFilters","filterExpansions","expansions","flatMap","printings","deckHasExpansion","applyCardFilters","cards","p","filteredResults","filteredCardCounts","previewText","decksByCard","urls","panes","menuItem","pane","Tab","Pane","TextArea","height","Dimmer","inverted","Loader","columns","rel","horizontal","disabled","multiple","s","Field","radio","Message","negative","renderActiveOnly","refresh","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.f246eb0a.chunk.js","sourcesContent":["export interface Deck {\r\n    main: Card[];\r\n    sideboard: Card[];\r\n}\r\n\r\nexport interface Card {\r\n    name: string;\r\n    count: number;\r\n    highlighted: boolean;\r\n    info?: CardInfo;\r\n}\r\n\r\nexport interface Result {\r\n    pilot: string;\r\n    url: string;\r\n    deck: Deck;\r\n    duplicatePilot: boolean;\r\n    archetype: string;\r\n    index: number;\r\n    favorite: boolean;\r\n    spicy: boolean;\r\n}\r\n\r\nexport interface CardInfo {\r\n    colors: Color[];\r\n    faceName: string;\r\n    type: string;\r\n    types: CardType[];\r\n    manaCost: string;\r\n    text: string;\r\n    power: string;\r\n    toughness: string;\r\n    otherHalf: {\r\n        colors: Color[];\r\n        faceName: string;\r\n        type: string;\r\n        types: CardType[];\r\n        manaCost: string;\r\n        text: string;\r\n        power: string;\r\n        toughness: string;\r\n    };\r\n    printings: string[];\r\n}\r\n\r\nexport interface CardCount {\r\n    card: Card;\r\n    deckCount: number;\r\n}\r\n\r\nexport type Color = \"W\" | \"U\" | \"B\" | \"R\" | \"G\";\r\nexport type CardType = \"Creature\" | \"Land\" | \"Instant\" | \"Sorcery\" | \"Artifact\" | \"Enchantment\" | \"Planeswalker\";\r\n\r\nexport const setList = [\r\n    { code: \"NEO\", name: \"Kamigawa: Neon Dynasty\" },\r\n    { code: \"VOW\", name: \"Innistrad: Crimson Vow\" },\r\n    { code: \"MID\", name: \"Innistrad: Midnight Hunt\" },\r\n    { code: \"AFR\", name: \"Adventures in the Forgotten Realms\" },\r\n    { code: \"MH2\", name: \"Modern Horizons 2\" },\r\n    { code: \"STX\", name: \"Strixhaven: School of Mages\" },\r\n    { code: \"KHM\", name: \"Kaldheim\" },\r\n    { code: \"ZNR\", name: \"Zendikar Rising\" },\r\n    { code: \"M21\", name: \"Core Set 2021\" },\r\n    { code: \"IKO\", name: \"Ikoria: Lair of Behemoths\" },\r\n    { code: \"THB\", name: \"Theros Beyond Death\" },\r\n    { code: \"ELD\", name: \"Throne of Eldraine\" },\r\n    { code: \"M20\", name: \"Core Set 2020\" },\r\n    { code: \"MH1\", name: \"Modern Horizons\" },\r\n    { code: \"WAR\", name: \"War of the Spark\" }\r\n];\r\n\r\nexport interface Archetype {\r\n    id: number;\r\n    name: string;\r\n    prefixColors?: boolean;\r\n    rules: Rule[];\r\n}\r\n\r\nexport interface Rule {\r\n    cardName: string;\r\n    in: \"main\" | \"side\" | \"both\";\r\n    atLeast?: number;\r\n    atMost?: number;\r\n}\r\n\r\nexport enum guildMap {\r\n    UW = \"Azorius\",\r\n    UB = \"Dimir\",\r\n    UR = \"Izzet\",\r\n    UG = \"Simic\",\r\n    BW = \"Orzhov\",\r\n    BR = \"Rakdos\",\r\n    BG = \"Golgari\",\r\n    GR = \"Gruul\",\r\n    GW = \"Selesnya\",\r\n    RW = \"Boros\"\r\n}\r\n\r\nexport enum shardMap {\r\n    UBR = \"Grixis\",\r\n    UBG = \"Sultai\",\r\n    UBW = \"Esper\",\r\n    URG = \"Temur\",\r\n    URW = \"Jeskai\",\r\n    UGW = \"Bant\",\r\n    BRG = \"Jund\",\r\n    BRW = \"Mardu\",\r\n    BGW = \"Abzan\",\r\n    RGW = \"Naya\"\r\n}\r\n","import fetch from \"node-fetch\";\r\nimport * as cheerio from \"cheerio\";\r\nimport { Deck, Result } from \"./types\";\r\nimport cardInfo from \"./resources/cardInfo.json\";\r\n\r\nconst regex = /[^A-Za-z _-]/g;\r\nconst spaces = / /g;\r\n\r\nexport const getDecksFromUrl = async (wotcUrl: string): Promise<Result[]> => {\r\n    const results: Result[] = [];\r\n    if (wotcUrl.startsWith(\"https://magic.wizards.com\")) {\r\n        try {\r\n            const response = await fetch(`https://scraper-cors.herokuapp.com/${wotcUrl}`);\r\n            const body = await response.text();\r\n            const $ = cheerio.load(body);\r\n            const usernames: string[] = [];\r\n            $(\".deck-group\").each((index: number, dg: cheerio.Element) => {\r\n                const headerContent = $(dg).find(\"h4\").text();\r\n                const username = headerContent.split(\" (\")[0];\r\n                const duplicatePilot = usernames.includes(username);\r\n                usernames.push(username);\r\n                const parts = headerContent.split(\" (\");\r\n                const name = parts[0];\r\n                let chaff = \"\";\r\n                if (parts[1]) {\r\n                    chaff = parts[1].replace(regex, \"\").replace(spaces, \"_\").toLowerCase();\r\n                }\r\n                const url = `${wotcUrl}#${name.replace(regex, \"\").replace(spaces, \"_\").toLowerCase()}${chaff ? \"_\" + chaff : \"\"}`;\r\n\r\n                const deck: Deck = {\r\n                    main: [],\r\n                    sideboard: []\r\n                };\r\n                $(dg)\r\n                    .find(\".sorted-by-overview-container\")\r\n                    .find(\".row\")\r\n                    .each((index: number, row: cheerio.Element) => {\r\n                        const name: string = $(row).find(\".card-name\").text().trim();\r\n                        const info = cardInfo[name] || cardInfo[name.split(\"//\")[0].trim()];\r\n                        deck.main.push({\r\n                            name,\r\n                            count: parseInt($(row).find(\".card-count\").text(), 10),\r\n                            highlighted: false,\r\n                            info\r\n                        });\r\n                    });\r\n\r\n                $(dg)\r\n                    .find(\".sorted-by-sideboard-container\")\r\n                    .find(\".row\")\r\n                    .each((index: number, row: cheerio.Element) => {\r\n                        const name = $(row).find(\".card-name\").text().trim();\r\n                        const info = cardInfo[name] || cardInfo[name.split(\"//\")[0].trim()];\r\n                        deck.sideboard.push({\r\n                            name,\r\n                            count: parseInt($(row).find(\".card-count\").text(), 10),\r\n                            highlighted: false,\r\n                            info\r\n                        });\r\n                    });\r\n\r\n                results.push({\r\n                    pilot: username,\r\n                    url: url,\r\n                    deck: deck,\r\n                    duplicatePilot,\r\n                    archetype: \"\",\r\n                    favorite: false,\r\n                    spicy: false,\r\n                    index\r\n                });\r\n            });\r\n        } catch (err) {\r\n            console.log(err);\r\n            throw err;\r\n        }\r\n    }\r\n    return results;\r\n};\r\n","import React from \"react\";\r\nimport { Card } from \"./types\";\r\nimport { Card as SemanticCard, List, Popup } from \"semantic-ui-react\";\r\nimport { Mana } from \"@saeris/react-mana\";\r\n\r\ninterface CardItemProps {\r\n    card: Card;\r\n    toggleCardHighlight(Card: Card): void;\r\n}\r\n\r\nconst colorMap: {\r\n    [key: string]: \"blue\" | \"black\" | \"red\" | \"green\" | \"yellow\" | \"brown\" | undefined;\r\n} = {\r\n    W: undefined,\r\n    U: \"blue\",\r\n    B: \"black\",\r\n    R: \"red\",\r\n    G: \"green\",\r\n    M: \"yellow\",\r\n    C: \"brown\"\r\n};\r\n\r\nconst CardItem: React.FC<CardItemProps> = (props: CardItemProps) => {\r\n    const { card, toggleCardHighlight } = props;\r\n    let cardColor: \"blue\" | \"black\" | \"red\" | \"green\" | \"yellow\" | \"brown\" | undefined;\r\n    let otherHalfColor: \"blue\" | \"black\" | \"red\" | \"green\" | \"yellow\" | \"brown\" | undefined;\r\n    const costIcons: React.ReactElement[] = [];\r\n    if (card.info) {\r\n        const { colors, manaCost } = card.info;\r\n        switch (colors.length) {\r\n            case 0:\r\n                cardColor = colorMap[\"C\"];\r\n                break;\r\n            case 1:\r\n                cardColor = colorMap[colors[0]];\r\n                break;\r\n            default:\r\n                cardColor = colorMap[\"M\"];\r\n                break;\r\n        }\r\n        if (card.info.otherHalf?.colors) {\r\n            switch (card.info.otherHalf.colors.length) {\r\n                case 0:\r\n                    otherHalfColor = colorMap[\"C\"];\r\n                    break;\r\n                case 1:\r\n                    otherHalfColor = colorMap[colors[0]];\r\n                    break;\r\n                default:\r\n                    otherHalfColor = colorMap[\"M\"];\r\n                    break;\r\n            }\r\n        }\r\n        if (manaCost) {\r\n            const manaCostArray = manaCost.slice(1, manaCost.length - 1).split(\"}{\");\r\n            manaCostArray.forEach((pip, index) => {\r\n                costIcons.push(\r\n                    <List.Item key={index} style={{ marginLeft: 2, paddingTop: 0 }} content={<Mana symbol={pip.replace(\"/\", \"\").toLowerCase()} shadow />} />\r\n                );\r\n            });\r\n        }\r\n    }\r\n\r\n    return (\r\n        <List.Item key={card.name} onClick={() => toggleCardHighlight(card)} className={card.highlighted ? \"highlight\" : \"\"}>\r\n            <Popup\r\n                trigger={\r\n                    <p>\r\n                        {card.count} {card.name}\r\n                    </p>\r\n                }\r\n            >\r\n                <Popup.Content>\r\n                    {card.info && (\r\n                        <>\r\n                            <SemanticCard color={cardColor}>\r\n                                <SemanticCard.Content>\r\n                                    <SemanticCard.Header>{card.name}</SemanticCard.Header>\r\n                                    <SemanticCard.Meta>{card.info.type}</SemanticCard.Meta>\r\n                                    <SemanticCard.Description style={{ whiteSpace: \"pre-line\" }}>{card.info.text}</SemanticCard.Description>\r\n                                </SemanticCard.Content>\r\n                                {(card.info.power || card.info.toughness) && (\r\n                                    <SemanticCard.Content extra style={{ padding: \".25em 1em\" }}>\r\n                                        <div\r\n                                            style={{\r\n                                                float: \"right\",\r\n                                                fontWeight: \"bold\"\r\n                                            }}\r\n                                        >\r\n                                            {card.info.power}/{card.info.toughness}\r\n                                        </div>\r\n                                    </SemanticCard.Content>\r\n                                )}\r\n                            </SemanticCard>\r\n                            {card.info.otherHalf && (\r\n                                <SemanticCard color={otherHalfColor}>\r\n                                    <SemanticCard.Content>\r\n                                        <SemanticCard.Header>{card.info.otherHalf.faceName}</SemanticCard.Header>\r\n                                        <SemanticCard.Meta>{card.info.otherHalf.type}</SemanticCard.Meta>\r\n                                        <SemanticCard.Description style={{ whiteSpace: \"pre-line\" }}>{card.info.otherHalf.text}</SemanticCard.Description>\r\n                                    </SemanticCard.Content>\r\n                                    {(card.info.otherHalf.power || card.info.otherHalf.toughness) && (\r\n                                        <SemanticCard.Content extra style={{ padding: \".25em 1em\" }}>\r\n                                            <div\r\n                                                style={{\r\n                                                    float: \"right\",\r\n                                                    fontWeight: \"bold\"\r\n                                                }}\r\n                                            >\r\n                                                {card.info.power}/{card.info.toughness}\r\n                                            </div>\r\n                                        </SemanticCard.Content>\r\n                                    )}\r\n                                </SemanticCard>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </Popup.Content>\r\n            </Popup>\r\n        </List.Item>\r\n    );\r\n};\r\n\r\nexport default CardItem;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { Header, Grid, List, Container, Icon } from \"semantic-ui-react\";\r\nimport \"./App.css\";\r\nimport { Doughnut } from \"react-chartjs-2\";\r\nimport { Result, Card } from \"./types\";\r\nimport CardItem from \"./CardItem\";\r\n\r\ninterface DeckListProps {\r\n    result: Result;\r\n    updateDeck(result: Result): void;\r\n}\r\n\r\nconst colorLabels = [\"White\", \"Blue\", \"Black\", \"Red\", \"Green\", \"Colorless\"];\r\n\r\nconst typeLabels = [\"Creature\", \"Noncreature\", \"Land\"];\r\n\r\nconst colorColors = [\"#fff8d6\", \"#367ae0\", \"#404040\", \"#db2e2e\", \"#187d2a\", \"#cfcfcf\"];\r\n\r\nconst typeColors = [\"#8ba349\", \"#c48dc2\", \"#ffb114\"];\r\n\r\nconst DeckList: React.FC<DeckListProps> = (props: DeckListProps) => {\r\n    const { result, updateDeck } = props;\r\n    const [colorCount, setColorCount] = useState<number[]>([]);\r\n    const [typeCount, setTypeCount] = useState<number[]>([]);\r\n\r\n    useEffect(() => {\r\n        if (!result) return;\r\n        let [wCount, uCount, bCount, rCount, gCount, cCount] = [0, 0, 0, 0, 0, 0];\r\n        let [creatures, noncreatures, lands] = [0, 0, 0];\r\n\r\n        result.deck.main.forEach((card) => {\r\n            if (card.info) {\r\n                const { colors, types } = card.info;\r\n                if (colors.includes(\"W\")) wCount += card.count;\r\n                if (colors.includes(\"U\")) uCount += card.count;\r\n                if (colors.includes(\"B\")) bCount += card.count;\r\n                if (colors.includes(\"R\")) rCount += card.count;\r\n                if (colors.includes(\"G\")) gCount += card.count;\r\n                if (!colors.length && !card.info.types.includes(\"Land\")) cCount += card.count;\r\n\r\n                if (types.includes(\"Creature\")) creatures += card.count;\r\n                else if (types.includes(\"Land\")) lands += card.count;\r\n                else noncreatures += card.count;\r\n            }\r\n        });\r\n        setColorCount([wCount, uCount, bCount, rCount, gCount, cCount]);\r\n        setTypeCount([creatures, noncreatures, lands]);\r\n    }, [result]);\r\n\r\n    const toggleCardHighlight = (card: Card) => {\r\n        const { deck } = result;\r\n        deck.main.forEach((c) => {\r\n            if (c.name === card.name) {\r\n                c.highlighted = !c.highlighted;\r\n            }\r\n        });\r\n        deck.sideboard.forEach((c) => {\r\n            if (c.name === card.name) {\r\n                c.highlighted = !c.highlighted;\r\n            }\r\n        });\r\n        updateDeck({ ...result, deck });\r\n    };\r\n\r\n    const toggleSpicy = () => {\r\n        updateDeck({ ...result, spicy: !result.spicy });\r\n    };\r\n\r\n    const toggleFavorite = () => {\r\n        updateDeck({ ...result, favorite: !result.favorite });\r\n    };\r\n\r\n    const main: { [key: string]: React.ReactElement[] } = {\r\n        Planeswalkers: [],\r\n        Creatures: [],\r\n        Instants: [],\r\n        Sorceries: [],\r\n        Artifacts: [],\r\n        Enchantments: [],\r\n        Lands: [],\r\n        Unknown: []\r\n    };\r\n\r\n    result.deck.main.forEach((card) => {\r\n        if (!card.info) {\r\n            main.Unknown.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Creature\")) {\r\n            main.Creatures.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Land\")) {\r\n            main.Lands.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Instant\")) {\r\n            main.Instants.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Sorcery\")) {\r\n            main.Sorceries.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Artifact\") && !card.info.types.includes(\"Creature\")) {\r\n            main.Artifacts.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Enchantment\") && !card.info.types.includes(\"Creature\")) {\r\n            main.Enchantments.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Planeswalker\")) {\r\n            main.Planeswalkers.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        }\r\n    });\r\n\r\n    const side: { [key: string]: React.ReactElement[] } = {\r\n        Companion: [],\r\n        Planeswalkers: [],\r\n        Creatures: [],\r\n        Instants: [],\r\n        Sorceries: [],\r\n        Artifacts: [],\r\n        Enchantments: [],\r\n        Lands: [],\r\n        Unknown: []\r\n    };\r\n\r\n    result.deck.sideboard.forEach((card) => {\r\n        if (!card.info) {\r\n            side.Unknown.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Creature\")) {\r\n            if (card.info.text && card.info.text.includes(\"Companion â€”\")) {\r\n                side.Companion.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n            } else {\r\n                side.Creatures.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n            }\r\n        } else if (card.info.types.includes(\"Land\")) {\r\n            side.Lands.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Instant\")) {\r\n            side.Instants.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Sorcery\")) {\r\n            side.Sorceries.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Artifact\") && !card.info.types.includes(\"Creature\")) {\r\n            side.Artifacts.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Enchantment\") && !card.info.types.includes(\"Creature\")) {\r\n            side.Enchantments.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        } else if (card.info.types.includes(\"Planeswalker\")) {\r\n            side.Planeswalkers.push(<CardItem key={card.name} card={card} toggleCardHighlight={toggleCardHighlight} />);\r\n        }\r\n    });\r\n\r\n    return (\r\n        <Grid width={16} className=\"decklist\" padded>\r\n            <Grid.Row>\r\n                <Grid.Column width={5}>\r\n                    <Header style={{ marginBottom: 0 }}>\r\n                        {result.archetype ? `${result.archetype} | ` : \"\"}\r\n                        {result.pilot}\r\n                    </Header>\r\n                </Grid.Column>\r\n                <Grid.Column width={2} textAlign={\"right\"}>\r\n                    <Icon name=\"heart\" size=\"big\" color={result.favorite ? \"pink\" : \"grey\"} className=\"clickable\" onClick={toggleFavorite} />{\" \"}\r\n                    <Icon name=\"hotjar\" size=\"big\" color={result.spicy ? \"orange\" : \"grey\"} className=\"clickable\" onClick={toggleSpicy} />\r\n                </Grid.Column>\r\n            </Grid.Row>\r\n            <Grid.Row>\r\n                <Grid.Column width={4}>\r\n                    <Header content=\"Main\" style={{ marginBottom: 0 }} />\r\n                    <List style={{ marginTop: 0 }}>\r\n                        <List.Item>\r\n                            {Object.keys(main)\r\n                                .filter((key) => main[key].length)\r\n                                .map((key) => {\r\n                                    return (\r\n                                        <List.List key={key}>\r\n                                            <List.Header content={key} />\r\n                                            {main[key]}\r\n                                        </List.List>\r\n                                    );\r\n                                })}\r\n                        </List.Item>\r\n                    </List>\r\n                </Grid.Column>\r\n                <Grid.Column width={3}>\r\n                    <Header content=\"Sideboard\" style={{ marginBottom: 0 }} />\r\n                    <List style={{ marginTop: 0 }}>\r\n                        <List.Item>\r\n                            {Object.keys(side)\r\n                                .filter((key) => side[key].length)\r\n                                .map((key) => {\r\n                                    return (\r\n                                        <List.List key={key}>\r\n                                            <List.Header>\r\n                                                {key === \"Companion\" && <Icon name=\"paw\" />}\r\n                                                {key}\r\n                                                {key === \"Companion\" && <Icon name=\"paw\" />}\r\n                                            </List.Header>\r\n                                            {side[key]}\r\n                                        </List.List>\r\n                                    );\r\n                                })}\r\n                        </List.Item>\r\n                    </List>\r\n                </Grid.Column>\r\n                <Grid.Column width={6}>\r\n                    <Container style={{ marginBottom: \"10px\" }}>\r\n                        <Doughnut\r\n                            data={{\r\n                                labels: colorLabels,\r\n                                datasets: [\r\n                                    {\r\n                                        backgroundColor: colorColors,\r\n                                        data: colorCount\r\n                                    }\r\n                                ]\r\n                            }}\r\n                            options={{\r\n                                title: {\r\n                                    display: true,\r\n                                    text: \"Color Distribution\"\r\n                                },\r\n                                legend: { display: false }\r\n                            }}\r\n                        />\r\n                    </Container>\r\n                    <Container>\r\n                        <Doughnut\r\n                            data={{\r\n                                labels: typeLabels,\r\n                                datasets: [\r\n                                    {\r\n                                        backgroundColor: typeColors,\r\n                                        data: typeCount,\r\n                                        label: \"1\"\r\n                                    },\r\n                                    {\r\n                                        backgroundColor: typeColors.slice(0, 2),\r\n                                        data: typeCount.slice(0, 2),\r\n                                        label: \"2\"\r\n                                    }\r\n                                ]\r\n                            }}\r\n                            options={{\r\n                                title: {\r\n                                    display: true,\r\n                                    text: \"Type Distribution\"\r\n                                },\r\n                                legend: { display: true, position: \"bottom\" },\r\n                                cutoutPercentage: 30\r\n                            }}\r\n                        />\r\n                    </Container>\r\n                </Grid.Column>\r\n            </Grid.Row>\r\n        </Grid>\r\n    );\r\n};\r\n\r\nexport default DeckList;\r\n","import React, { ChangeEvent, useState } from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { Grid, Input, Button, Modal, Checkbox, InputOnChangeData } from \"semantic-ui-react\";\r\nimport \"./App.css\";\r\nimport { Result } from \"./types\";\r\nimport DeckList from \"./DeckList\";\r\n\r\ninterface DeckDetailModalProps {\r\n    results: Result[];\r\n    setResults(results: Result[]): void;\r\n    open: boolean;\r\n    onClose(): void;\r\n}\r\n\r\nconst DeckDetailModal: React.FC<DeckDetailModalProps> = (props: DeckDetailModalProps) => {\r\n    const { results, setResults, open, onClose } = props;\r\n    const [displayedDeckIndex, setDisplayedDeckIndex] = useState<number>(0);\r\n    const resultCount = results.length;\r\n\r\n    const goToNextDeck = () => {\r\n        if (!displayedDeck) return;\r\n        const index = displayedDeckIndex || 0;\r\n\r\n        const res = [...results];\r\n        res[index] = displayedDeck;\r\n        setResults(res);\r\n\r\n        if (index + 1 < results.length) {\r\n            setDisplayedDeckIndex(index + 1);\r\n        } else {\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    const goToPreviousDeck = () => {\r\n        if (!displayedDeck) return;\r\n        const index = displayedDeckIndex || 0;\r\n\r\n        const res = [...results];\r\n        res[index] = displayedDeck;\r\n        setResults(res);\r\n\r\n        if (index !== 0) {\r\n            setDisplayedDeckIndex(index - 1);\r\n        } else {\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    const updateDisplayedDeck = (result: Result) => {\r\n        const res = [...results];\r\n        res[displayedDeckIndex] = result;\r\n        setResults(res);\r\n    };\r\n\r\n    const handleSetArchetype = (e: ChangeEvent, data: InputOnChangeData) => {\r\n        const { value } = data;\r\n        updateDisplayedDeck({ ...results[displayedDeckIndex], archetype: value });\r\n    };\r\n\r\n    const handleKeyPress = (e: React.KeyboardEvent) => {\r\n        if (e.key === \"Enter\") {\r\n            goToNextDeck();\r\n        }\r\n    };\r\n    const displayedDeck = results[displayedDeckIndex];\r\n    return (\r\n        <Modal open={open} onClose={onClose} style={{ top: \"3em\", left: \"calc(50vw - 475px)\" }} closeOnDimmerClick={false} closeIcon>\r\n            <Modal.Content>\r\n                {!!displayedDeck && (\r\n                    <Grid width={16}>\r\n                        <Grid.Row className=\"decklist-header\" verticalAlign=\"middle\">\r\n                            <Grid.Column width={4}>\r\n                                <h3 style={{ marginBottom: \"0.25em\" }}>{displayedDeck.pilot}</h3>\r\n                                <span>\r\n                                    Deck {displayedDeck.index + 1} of {resultCount}\r\n                                </span>\r\n                            </Grid.Column>\r\n                            <Grid.Column width={6}>\r\n                                <Input label=\"Archetype\" value={displayedDeck.archetype} onChange={handleSetArchetype} onKeyPress={handleKeyPress} />\r\n                            </Grid.Column>\r\n                            <Grid.Column width={2}>\r\n                                <Checkbox\r\n                                    checked={displayedDeck.favorite}\r\n                                    label=\"Favorite?\"\r\n                                    onChange={() =>\r\n                                        updateDisplayedDeck({\r\n                                            ...displayedDeck,\r\n                                            favorite: !displayedDeck.favorite\r\n                                        })\r\n                                    }\r\n                                />\r\n                                <Checkbox\r\n                                    checked={displayedDeck.spicy}\r\n                                    label=\"Spicy?\"\r\n                                    onChange={() =>\r\n                                        updateDisplayedDeck({\r\n                                            ...displayedDeck,\r\n                                            spicy: !displayedDeck.spicy\r\n                                        })\r\n                                    }\r\n                                />\r\n                            </Grid.Column>\r\n                            <Grid.Column width={2}>\r\n                                <Button onClick={goToPreviousDeck} content=\"Previous\" />\r\n                            </Grid.Column>\r\n                            <Grid.Column width={2}>\r\n                                <Button onClick={goToNextDeck} content=\"Next\" />\r\n                            </Grid.Column>\r\n                        </Grid.Row>\r\n\r\n                        <Grid.Row>\r\n                            <DeckList result={displayedDeck} updateDeck={updateDisplayedDeck} />\r\n                        </Grid.Row>\r\n                    </Grid>\r\n                )}\r\n            </Modal.Content>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default DeckDetailModal;\r\n","import React from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { List, Container, Modal, ListItem } from \"semantic-ui-react\";\r\nimport \"./App.css\";\r\n\r\ninterface InfoModalProps {\r\n    open: boolean;\r\n    onClose(): void;\r\n}\r\n\r\nconst InfoModal: React.FC<InfoModalProps> = (props: InfoModalProps) => {\r\n    const { open, onClose } = props;\r\n\r\n    return (\r\n        <Modal open={open} centered={false} onClose={onClose} closeOnDimmerClick={true} closeIcon>\r\n            <Modal.Content>\r\n                <List>\r\n                    <List.Item>\r\n                        <List.Header>What am I looking at?</List.Header>\r\n                        <Container style={{ padding: \"0.5em 1.25em 0.25em\" }}>\r\n                            This is a web tool for scraping Wizards of the Coast&apos;s MTGO results posts and formatting the contents for a Reddit post (or\r\n                            anywhere else that supports Markdown)\r\n                        </Container>\r\n                    </List.Item>\r\n                    <List.Item>\r\n                        <List.Header>How do I use it?</List.Header>\r\n                        <Container style={{ paddingLeft: \"1em\" }}>\r\n                            <List ordered>\r\n                                <ListItem>Paste the url for a WotC deck dump in the little box and click &apos;Scrape.&apos;</ListItem>\r\n                                <ListItem>\r\n                                    Click &apos;Decks&apos; to view the decklists. From there, you can enter the archetype names and click cards to highlight\r\n                                    them.\r\n                                </ListItem>\r\n                                <ListItem>\r\n                                    Copy the resulting text into your Reddit post. Be sure you&apos;re in &apos;Markdown Mode&apos; or your links will get ugly.\r\n                                </ListItem>\r\n                            </List>\r\n                        </Container>\r\n                    </List.Item>\r\n                    <List.Item>\r\n                        <List.Header>How can I report a bug or suggest a feature?</List.Header>\r\n                        <Container style={{ padding: \"0.5em 1.25em \" }}>\r\n                            Message me on Reddit: <a href=\"https://reddit.com/message/compose/?to=FereMiyJeenyus\">/u/FereMiyJeenyus</a>\r\n                        </Container>\r\n                    </List.Item>\r\n                </List>\r\n            </Modal.Content>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default InfoModal;\r\n","import React from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { Button, Form, Container, DropdownItemProps, Grid } from \"semantic-ui-react\";\r\nimport \"./App.css\";\r\nimport { Rule } from \"./types\";\r\n\r\ninterface RuleFormProps {\r\n    rule: Rule;\r\n    index: number;\r\n    updateRule(rule: Rule, index: number): void;\r\n    removeRule(index: number): void;\r\n    cardOptions: DropdownItemProps[];\r\n}\r\n\r\nconst RuleForm: React.FC<RuleFormProps> = (props: RuleFormProps) => {\r\n    const { rule, index, updateRule, removeRule, cardOptions } = props;\r\n\r\n    return (\r\n        <>\r\n            <Grid.Column width={4}>\r\n                {rule.cardName ? (\r\n                    <Container>\r\n                        Card Name\r\n                        <br />\r\n                        <strong style={{ display: \"block\", marginTop: \"0.5em\" }}>{rule.cardName}</strong>\r\n                    </Container>\r\n                ) : (\r\n                    <Form.Dropdown\r\n                        label=\"Card Name\"\r\n                        selection\r\n                        search\r\n                        lazyLoad\r\n                        minCharacters={3}\r\n                        value={rule.cardName}\r\n                        options={cardOptions}\r\n                        onChange={(_e, { value }) => {\r\n                            updateRule({ ...rule, cardName: value as string }, index);\r\n                        }}\r\n                    />\r\n                )}\r\n            </Grid.Column>\r\n            <Grid.Column width={2}>\r\n                <Form.Dropdown\r\n                    label=\"At Least\"\r\n                    fluid\r\n                    selection\r\n                    clearable\r\n                    value={rule.atLeast}\r\n                    options={[\r\n                        { key: 1, text: 1, value: 1 },\r\n                        { key: 2, text: 2, value: 2 },\r\n                        { key: 3, text: 3, value: 3 },\r\n                        { key: 4, text: 4, value: 4 }\r\n                    ]}\r\n                    onChange={(_e, { value }) => updateRule({ ...rule, atLeast: value !== \"\" ? (value as number) : undefined }, index)}\r\n                />\r\n            </Grid.Column>\r\n            <Grid.Column width={2}>\r\n                <Form.Dropdown\r\n                    label=\"At Most\"\r\n                    fluid\r\n                    selection\r\n                    clearable\r\n                    value={rule.atMost}\r\n                    options={[\r\n                        { key: 0, text: 0, value: 0 },\r\n                        { key: 1, text: 1, value: 1 },\r\n                        { key: 2, text: 2, value: 2 },\r\n                        { key: 3, text: 3, value: 3 }\r\n                    ]}\r\n                    onChange={(_e, { value }) => updateRule({ ...rule, atMost: value !== \"\" ? (value as number) : undefined }, index)}\r\n                />\r\n            </Grid.Column>\r\n            <Grid.Column width={3}>\r\n                <Form.Dropdown\r\n                    label=\"In\"\r\n                    fluid\r\n                    selection\r\n                    value={rule.in}\r\n                    options={[\r\n                        { key: 0, text: \"Main\", value: \"main\" },\r\n                        { key: 1, text: \"Sideboard\", value: \"side\" },\r\n                        { key: 2, text: \"Either\", value: \"both\" }\r\n                    ]}\r\n                    onChange={(_e, { value }) => updateRule({ ...rule, in: value as \"main\" | \"side\" | \"both\" }, index)}\r\n                />\r\n            </Grid.Column>\r\n            <Grid.Column width={1} textAlign=\"right\">\r\n                <Button\r\n                    style={{ marginTop: \"1.4em\" }}\r\n                    icon=\"trash\"\r\n                    onClick={() => {\r\n                        removeRule(index);\r\n                    }}\r\n                />\r\n            </Grid.Column>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default RuleForm;\r\n","import React from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { DropdownItemProps, Checkbox, Grid, Input, Button } from \"semantic-ui-react\";\r\nimport \"./App.css\";\r\nimport RuleForm from \"./RuleForm\";\r\nimport { Archetype, Rule } from \"./types\";\r\n\r\ninterface ArchetypeViewProps {\r\n    archetype: Archetype;\r\n    updateArchetype(archetype: Archetype): void;\r\n    cardOptions: DropdownItemProps[];\r\n}\r\n\r\nconst ArchetypeView: React.FC<ArchetypeViewProps> = (props: ArchetypeViewProps) => {\r\n    const { archetype, updateArchetype, cardOptions } = props;\r\n\r\n    const updateRule = (rule: Rule, index: number) => {\r\n        const newRules = [...archetype.rules];\r\n        newRules[index] = rule;\r\n        updateArchetype({ ...archetype, rules: newRules });\r\n    };\r\n\r\n    const addRule = () => {\r\n        const newRules = [...archetype.rules, { cardName: \"\", in: \"main\" } as Rule];\r\n        updateArchetype({ ...archetype, rules: newRules });\r\n    };\r\n\r\n    const removeRule = (index: number) => {\r\n        const newRules = [...archetype.rules];\r\n        newRules.splice(index, 1);\r\n        updateArchetype({ ...archetype, rules: newRules });\r\n    };\r\n\r\n    return (\r\n        <Grid divided=\"vertically\">\r\n            <Grid.Row verticalAlign=\"middle\">\r\n                <Grid.Column width={4}>\r\n                    <Input\r\n                        value={archetype.name}\r\n                        placeholder=\"Archetype Name\"\r\n                        onChange={(e) => {\r\n                            updateArchetype({ ...archetype, name: e.target.value });\r\n                        }}\r\n                    />\r\n                </Grid.Column>\r\n                <Grid.Column width={4}>\r\n                    <Checkbox\r\n                        toggle\r\n                        label=\"Add Color Prefix?\"\r\n                        checked={archetype.prefixColors}\r\n                        onChange={(e, { checked }) => {\r\n                            updateArchetype({ ...archetype, prefixColors: checked });\r\n                        }}\r\n                    />\r\n                </Grid.Column>\r\n            </Grid.Row>\r\n\r\n            {archetype.rules.map((r, i) => {\r\n                return (\r\n                    <Grid.Row key={r.cardName}>\r\n                        <RuleForm rule={r} index={i} updateRule={updateRule} removeRule={removeRule} cardOptions={cardOptions} />\r\n                    </Grid.Row>\r\n                );\r\n            })}\r\n            <Grid.Row>\r\n                <Grid.Column>\r\n                    <Button icon=\"plus\" content=\"Add Card Rule\" onClick={addRule} />\r\n                </Grid.Column>\r\n            </Grid.Row>\r\n        </Grid>\r\n    );\r\n};\r\n\r\nexport default ArchetypeView;\r\n","import React, { useState } from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { Modal, Accordion, Icon, Button } from \"semantic-ui-react\";\r\nimport \"./App.css\";\r\nimport ArchetypeView from \"./ArchetypeView\";\r\nimport { Archetype } from \"./types\";\r\nimport cardInfo from \"./resources/cardInfo.json\";\r\n\r\ninterface RulesModalProps {\r\n    open: boolean;\r\n    onClose(refresh: boolean): void;\r\n    archetypeRules: Archetype[];\r\n    setArchetypeRules(archetypes: Archetype[]): void;\r\n}\r\n\r\nconst cardOptions = Object.keys(cardInfo).map((card) => ({ key: card, text: card, value: card }));\r\n\r\nconst RulesModal: React.FC<RulesModalProps> = (props: RulesModalProps) => {\r\n    const { open, onClose, archetypeRules, setArchetypeRules } = props;\r\n    const [activeIndex, setActiveIndex] = useState<number>(0);\r\n\r\n    const updateArchetype = (archetype: Archetype) => {\r\n        const newArchetypes = [...archetypeRules];\r\n        const index = archetypeRules.findIndex((a) => a.id === archetype.id);\r\n        newArchetypes[index] = archetype;\r\n        setArchetypeRules(newArchetypes);\r\n    };\r\n\r\n    const addArchetype = () => {\r\n        setArchetypeRules([...archetypeRules, { id: archetypeRules.length + 1, name: \"\", rules: [] }]);\r\n    };\r\n\r\n    return (\r\n        <Modal open={open} onClose={() => onClose(false)} closeIcon style={{ top: \"3em\", left: \"calc(50vw - 475px)\" }}>\r\n            <Modal.Header>Archetype Definitions (this is super beta, let me know if anything breaks)</Modal.Header>\r\n            <Modal.Content>\r\n                <Accordion>\r\n                    {archetypeRules.map((archetype, i) => {\r\n                        return (\r\n                            <>\r\n                                <Accordion.Title\r\n                                    key={`${archetype.id}-title`}\r\n                                    active={activeIndex === i}\r\n                                    index={i}\r\n                                    onClick={() => {\r\n                                        setActiveIndex(activeIndex !== i ? i : -1);\r\n                                    }}\r\n                                >\r\n                                    <Icon name=\"dropdown\" />\r\n                                    <span>{archetype.name}</span>\r\n                                    <div className=\"accordion-title-line\" />\r\n                                </Accordion.Title>\r\n                                <Accordion.Content key={`${archetype.id}-content`} active={activeIndex === i}>\r\n                                    <ArchetypeView archetype={archetype} updateArchetype={updateArchetype} cardOptions={cardOptions} />\r\n                                </Accordion.Content>\r\n                            </>\r\n                        );\r\n                    })}\r\n                </Accordion>\r\n            </Modal.Content>\r\n            <Modal.Actions>\r\n                <Button icon=\"plus\" content=\"Create New Archetype Definition\" floated=\"left\" onClick={() => addArchetype()} />\r\n                <Button color=\"blue\" content=\"Save and Apply\" onClick={() => onClose(true)} />\r\n            </Modal.Actions>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default RulesModal;\r\n","import React, { useState, useCallback, useEffect } from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { Header, Container, Grid, Input, Button, Form, Message, Tab, List, DropdownItemProps, Accordion, Icon, Dimmer, Loader } from \"semantic-ui-react\";\r\nimport \"./App.css\";\r\nimport { getDecksFromUrl } from \"./scraper\";\r\nimport { Result, Deck, setList, Card, CardCount, Rule, Archetype, guildMap, shardMap } from \"./types\";\r\nimport DeckDetailModal from \"./DeckDetailModal\";\r\nimport InfoModal from \"./InfoModal\";\r\nimport RulesModal from \"./RulesModal\";\r\n\r\nexport type TextFormat = \"plaintext\" | \"markdown\";\r\nconst thx = `Direct links courtesy of /u/FereMiyJeenyus and their [MTGO Results Scraper](https://feremiyjeenyus.github.io/mtgo-results-scraper/)`;\r\n\r\nconst App: React.FC = () => {\r\n    const [hasScraped, setHasScraped] = useState<boolean>(false);\r\n    const [wotcUrl, setWotcUrl] = useState<string>(\"\");\r\n    const [isLoading, setIsLoading] = useState<boolean>(false);\r\n    const [resultList, setResultList] = useState<Result[]>([]);\r\n    const [selectedCards, setSelectedCards] = useState<string[]>([]);\r\n    const [cardCounts, setCardCounts] = useState<CardCount[]>([]);\r\n    const [selectedExpansions, setSelectedExpansions] = useState<string[]>([]);\r\n    const [deckModalOpen, setDeckModalOpen] = useState<boolean>(false);\r\n    const [infoModalOpen, setInfoModalOpen] = useState<boolean>(false);\r\n    const [scrapeError, setScrapeError] = useState<boolean>(false);\r\n    const [isNumberedResults, setIsNumberedResults] = useState<boolean>(false);\r\n    const [expandOptions, setExpandOptions] = useState<boolean>(false);\r\n    const [textFormat, setTextFormat] = useState<TextFormat>(\"markdown\");\r\n    const [filterForSpice, setFilterForSpice] = useState<boolean>(false);\r\n    const [filterForFave, setFilterForFave] = useState<boolean>(false);\r\n    const [rulesModalOpen, setRulesModalOpen] = useState<boolean>(false);\r\n    const [cardOptions, setCardOptions] = useState<DropdownItemProps[]>([]);\r\n\r\n    const [archetypeRules, setArchetypeRules] = useState<Archetype[]>([]);\r\n\r\n    useEffect(() => {\r\n        const rulesFromStorage = window.localStorage?.getItem(\"archetypeRules\");\r\n        if (rulesFromStorage && rulesFromStorage !== \"undefined\") {\r\n            setArchetypeRules(JSON.parse(rulesFromStorage));\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        window.localStorage?.setItem(\"archetypeRules\", JSON.stringify(archetypeRules));\r\n    }, [archetypeRules]);\r\n\r\n    // scraping\r\n    const generateCardCounts = (results: Result[]) => {\r\n        const counts: CardCount[] = [];\r\n        results.forEach((r) => {\r\n            r.deck.main.forEach((card) => {\r\n                const countRow = counts.find((c) => c.card.name === card.name);\r\n                if (!countRow) {\r\n                    counts.push({\r\n                        card: { ...card, highlighted: false },\r\n                        deckCount: 1\r\n                    });\r\n                } else {\r\n                    countRow.card.count += card.count;\r\n                    countRow.deckCount++;\r\n                }\r\n            });\r\n\r\n            r.deck.sideboard.forEach((card) => {\r\n                const countRow = counts.find((c) => c.card.name === card.name);\r\n                if (!countRow) {\r\n                    counts.push({\r\n                        card: {\r\n                            name: card.name,\r\n                            count: card.count,\r\n                            highlighted: false\r\n                        },\r\n                        deckCount: 1\r\n                    });\r\n                } else {\r\n                    countRow.card.count += card.count;\r\n                    if (!r.deck.main.find((c) => c.name === card.name)) {\r\n                        countRow.deckCount++;\r\n                    }\r\n                }\r\n            });\r\n        });\r\n\r\n        setCardOptions(\r\n            counts\r\n                .sort((a, b) => {\r\n                    if (a.card.name < b.card.name) return -1;\r\n                    if (b.card.name < a.card.name) return 1;\r\n                    return 0;\r\n                })\r\n                .map((c) => ({\r\n                    key: c.card.name,\r\n                    text: c.card.name,\r\n                    value: c.card.name\r\n                }))\r\n        );\r\n        setCardCounts(counts);\r\n    };\r\n\r\n    const deckFitsRule = (deck: Card[], rule: Rule) => {\r\n        const { cardName, atMost, atLeast } = rule;\r\n        return (\r\n            (atMost === 0 && !deck.some((c) => c.name === cardName)) ||\r\n            deck.some((c) => c.name === cardName && (!atLeast || c.count >= atLeast) && (!atMost || c.count <= atMost))\r\n        );\r\n    };\r\n\r\n    const identifyArchetype = useCallback(\r\n        (result: Result): Result => {\r\n            const { deck } = result;\r\n            const combinedCards = [...deck.main];\r\n            deck.sideboard.forEach((card) => {\r\n                const mb = combinedCards.find((c) => c.name === card.name);\r\n                if (!mb) {\r\n                    combinedCards.push(card);\r\n                } else {\r\n                    mb.count += card.count;\r\n                }\r\n            });\r\n            for (const a of archetypeRules) {\r\n                const { name, rules } = a;\r\n                let isMatch = true;\r\n                rules.forEach((r) => {\r\n                    if (isMatch) {\r\n                        //short circuit if a rule isn't fit\r\n                        let cardSet: Card[] = [];\r\n                        switch (r.in) {\r\n                            case \"main\":\r\n                                cardSet = deck.main;\r\n                                break;\r\n                            case \"side\":\r\n                                cardSet = deck.sideboard;\r\n                                break;\r\n                            case \"both\":\r\n                                cardSet = combinedCards;\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n\r\n                        isMatch = deckFitsRule(cardSet, r);\r\n                    }\r\n                });\r\n                if (isMatch) {\r\n                    if (a.prefixColors) {\r\n                        const colorCount = combinedCards.reduce(\r\n                            (colors, card) => {\r\n                                card.info?.colors.forEach((color) => {\r\n                                    colors[color] += card.count;\r\n                                });\r\n                                return colors;\r\n                            },\r\n                            { W: 0, U: 0, B: 0, R: 0, G: 0 }\r\n                        );\r\n                        const colorString = `${colorCount.U ? \"U\" : \"\"}${colorCount.B ? \"B\" : \"\"}${colorCount.G ? \"G\" : \"\"}${colorCount.R ? \"R\" : \"\"}${\r\n                            colorCount.W ? \"W\" : \"\"\r\n                        }`;\r\n                        let colorPrefix = \"\";\r\n                        const useGuildNames = false;\r\n                        const useShardNames = true;\r\n                        switch (colorString.length) {\r\n                            case 1:\r\n                                colorPrefix = `Mono-${colorString}`;\r\n                                break;\r\n                            case 2:\r\n                                colorPrefix = useGuildNames ? guildMap[colorString] : colorString;\r\n                                break;\r\n                            case 3:\r\n                                colorPrefix = useShardNames ? shardMap[colorString] : colorString;\r\n                                break;\r\n                            case 4:\r\n                                colorPrefix = \"4c\";\r\n                                break;\r\n                            case 5:\r\n                                colorPrefix = \"5c\";\r\n                                break;\r\n                        }\r\n                        result.archetype = `${colorPrefix} ${name}`;\r\n                    } else {\r\n                        result.archetype = name;\r\n                    }\r\n                    break; //escape loop\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n        [archetypeRules]\r\n    );\r\n\r\n    const scrape = async () => {\r\n        try {\r\n            if (!wotcUrl) return;\r\n            setIsLoading(true);\r\n            const scrapedResults = await getDecksFromUrl(wotcUrl);\r\n            const namedResults = scrapedResults.map((r) => identifyArchetype(r));\r\n            generateCardCounts(namedResults);\r\n            setResultList(namedResults);\r\n            setHasScraped(true);\r\n            setDeckModalOpen(true);\r\n            setIsNumberedResults(wotcUrl.includes(\"champ\") || wotcUrl.includes(\"challenge\"));\r\n            setIsLoading(false);\r\n            if (scrapedResults.length) {\r\n                setDeckModalOpen(true);\r\n            }\r\n        } catch (error) {\r\n            setScrapeError(true);\r\n        }\r\n    };\r\n\r\n    // text generation\r\n    const generatePlaintext = (results: Result[]) => {\r\n        const resultLines = results.map(\r\n            (r) => `${r.archetype ? `${r.archetype} | ` : \"\"}${r.pilot}: <${r.url}>${r.duplicatePilot ? \" (duplicate pilot, link points to other list)\" : \"\"}`\r\n        );\r\n\r\n        const [path] = wotcUrl.split(\"/\").slice(-1);\r\n        const title = path.slice(0, -10);\r\n        const date = path.slice(-10);\r\n        const titleLine = title.replace(/-/g, \" \").replace(/\\w\\S*/g, (txt) => txt.charAt(0).toUpperCase() + txt.slice(1).toLowerCase()) + date;\r\n        return [titleLine, ...resultLines].join(\"\\r\\n\");\r\n    };\r\n\r\n    const generateMarkdownLine = (result: Result): string => {\r\n        const { deck, archetype, pilot, duplicatePilot, url } = result;\r\n\r\n        const muUrl = `[${archetype || \"archetype\"}](${url})`;\r\n        const muPilot = `**${pilot.replace(/[_]/g, \"\\\\_\")}${duplicatePilot ? \" (duplicate pilot, link points to other list)\" : \"\"}**`;\r\n\r\n        const highlights = [...deck.main.filter((c) => c.highlighted), ...deck.sideboard.filter((c) => c.highlighted)].map((c) => c.name);\r\n        const muHighlights = `(${Array.from(new Set(highlights.map((c) => `[[${c}]]`))).join(\", \")})`;\r\n        return `${isNumberedResults ? \"1.\" : \"*\"} ${muUrl}: ${muPilot} ${highlights.length ? muHighlights : \"\"}`;\r\n    };\r\n\r\n    const generateMarkdown = (results: Result[]) => {\r\n        if (!hasScraped) return \"\";\r\n        const resultLines: string[] = [];\r\n        for (const result of results) {\r\n            const muString = generateMarkdownLine(result);\r\n            resultLines.push(muString);\r\n        }\r\n        return [`Full Results: ${wotcUrl || \"\"}`, \"\", ...resultLines, \"\", thx].join(\"\\r\\n\");\r\n    };\r\n\r\n    const copyToClipboard = async (text: string) => {\r\n        if (!navigator.clipboard) {\r\n            return;\r\n        }\r\n        await navigator.clipboard.writeText(text);\r\n    };\r\n\r\n    // filtering\r\n    const deckHasCard = (deck: Deck, filterCards: string[]): boolean => {\r\n        const cards = [...deck.main, ...deck.sideboard];\r\n        if (cards.filter((c) => filterCards.includes(c.name)).length) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    const deckHasExpansion = (deck: Deck, filterExpansions: string[]): boolean => {\r\n        const cards = [...deck.main, ...deck.sideboard];\r\n        const nonBasics = cards.filter((c) => ![\"Plains\", \"Island\", \"Swamp\", \"Mountain\", \"Forest\"].includes(c.name));\r\n        const expansions = nonBasics.flatMap((c) => c.info?.printings || []);\r\n        const deduped = [...new Set(expansions)];\r\n\r\n        if (deduped.filter((e) => filterExpansions.includes(e)).length) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    const applyDeckFilters = useCallback(\r\n        (results: Result[]): Result[] => {\r\n            const spicyResults = results.filter((r) => !filterForSpice || r.spicy);\r\n            const faveResults = spicyResults.filter((r) => !filterForFave || r.favorite);\r\n            const expacResults = faveResults.filter((r) => !selectedExpansions.length || deckHasExpansion(r.deck, selectedExpansions));\r\n            const cardResults = expacResults.filter((r) => !selectedCards.length || deckHasCard(r.deck, selectedCards));\r\n            return cardResults;\r\n        },\r\n        [selectedCards, selectedExpansions, filterForFave, filterForSpice]\r\n    );\r\n\r\n    const applyCardFilters = useCallback(\r\n        (cards: CardCount[]): CardCount[] => {\r\n            const filteredBySet = cards.filter(\r\n                (c) => !selectedExpansions.length || c.card.info?.printings.filter((p) => selectedExpansions.includes(p)).length\r\n            );\r\n            const filteredByCard = filteredBySet.filter((c) => !selectedCards.length || selectedCards.includes(c.card.name));\r\n            return filteredByCard;\r\n        },\r\n        [selectedCards, selectedExpansions]\r\n    );\r\n\r\n    const filteredResults = applyDeckFilters(resultList);\r\n    const filteredCardCounts = applyCardFilters(cardCounts);\r\n\r\n    const previewText = textFormat === \"markdown\" ? generateMarkdown(filteredResults) : generatePlaintext(filteredResults);\r\n\r\n    const decksByCard: string = cardCounts\r\n        .filter((c) => c.card.info?.printings[0] === setList[0].code)\r\n        .map((c) => {\r\n            const cardName = `* [[${c.card.name}]]`;\r\n            const urls = resultList\r\n                .filter((r) => deckHasCard(r.deck, [c.card.name]))\r\n                .map((r) => {\r\n                    return `**[${r.archetype || \"archetype\"}](${r.url})**`;\r\n                });\r\n            return `${cardName} ${[...urls].join(\", \")}`;\r\n        })\r\n        .join(\"\\r\\n\");\r\n\r\n    const panes = [\r\n        {\r\n            menuItem: \"Preview\",\r\n            pane: (\r\n                <Tab.Pane key=\"Preview\">\r\n                    <Form>\r\n                        <Form.TextArea value={previewText} style={{ height: 500 }} />\r\n                    </Form>\r\n                </Tab.Pane>\r\n            )\r\n        },\r\n        {\r\n            menuItem: \"Card Counts\",\r\n            pane: (\r\n                <Tab.Pane key=\"Counts\">\r\n                    <Form>\r\n                        <Form.TextArea\r\n                            value={filteredCardCounts\r\n                                .sort((a, b) => b.card.count - a.card.count)\r\n                                .map(\r\n                                    (c) =>\r\n                                        `${c.card.count} cop${c.card.count > 1 ? \"ies\" : \"y\"} of ${c.card.name} in ${c.deckCount} deck${\r\n                                            c.deckCount > 1 ? \"s\" : \"\"\r\n                                        }`\r\n                                )\r\n                                .join(\"\\r\\n\")}\r\n                            style={{ height: 500 }}\r\n                        />\r\n                    </Form>\r\n                </Tab.Pane>\r\n            )\r\n        },\r\n        {\r\n            menuItem: `Decks with ${setList[0].code} Cards`,\r\n            pane: (\r\n                <Tab.Pane key=\"ByCard\">\r\n                    <Form>\r\n                        <Form.TextArea style={{ height: 500 }} value={decksByCard} />\r\n                    </Form>\r\n                </Tab.Pane>\r\n            )\r\n        }\r\n    ];\r\n\r\n    const handleRulesModalClose = (refresh: boolean) => {\r\n        if (refresh) {\r\n            const namedResults = resultList.map((r) => identifyArchetype(r));\r\n            setResultList(namedResults);\r\n        }\r\n        setRulesModalOpen(false);\r\n    };\r\n\r\n    return (\r\n        <Container className=\"App\">\r\n            {isLoading && (\r\n                <Dimmer active inverted>\r\n                    <Loader size=\"large\">Loading</Loader>\r\n                </Dimmer>\r\n            )}\r\n            <Header>MTGO Results Scraper</Header>\r\n            <Grid columns={16}>\r\n                <Grid.Row>\r\n                    <Grid.Column width={3} textAlign=\"left\">\r\n                        <Input value={wotcUrl} onChange={(e) => setWotcUrl(e.target.value)} placeholder=\"Deck Dump URL\" />\r\n                        <a\r\n                            href=\"https://magic.wizards.com/en/content/deck-lists-magic-online-products-game-info\"\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            style={{ marginLeft: \"1em\" }}\r\n                        >\r\n                            MTGO Results\r\n                        </a>\r\n                    </Grid.Column>\r\n                    <Grid.Column width={13} textAlign=\"left\">\r\n                        <List horizontal>\r\n                            <List.Item>\r\n                                <Button onClick={scrape} content=\"Scrape\" />\r\n                            </List.Item>\r\n                            <List.Item>\r\n                                <Button onClick={() => setDeckModalOpen(true)} content=\"Decks\" disabled={!hasScraped} />\r\n                            </List.Item>\r\n                            <List.Item>\r\n                                <Button\r\n                                    onClick={() => {\r\n                                        setRulesModalOpen(true);\r\n                                    }}\r\n                                    content=\"Archetype Definitions\"\r\n                                />\r\n                            </List.Item>\r\n                            <List.Item>\r\n                                <Button onClick={() => setInfoModalOpen(true)} content=\"What's this?\" />\r\n                            </List.Item>\r\n                        </List>\r\n                    </Grid.Column>\r\n                </Grid.Row>\r\n\r\n                <Grid.Row>\r\n                    <Grid.Column width={16}>\r\n                        <Accordion>\r\n                            <Accordion.Title\r\n                                active={expandOptions}\r\n                                onClick={() => {\r\n                                    setExpandOptions(!expandOptions);\r\n                                }}\r\n                            >\r\n                                <Icon name=\"dropdown\" />\r\n                                <span>Filters and Options (mostly functional, will make it look nicer soon)</span>\r\n                                <div className=\"accordion-title-line\" />\r\n                            </Accordion.Title>\r\n                            <Accordion.Content active={expandOptions}>\r\n                                <Form.Dropdown\r\n                                    label=\"Filter By Card: \"\r\n                                    multiple\r\n                                    clearable\r\n                                    search\r\n                                    selection\r\n                                    lazyLoad\r\n                                    value={selectedCards}\r\n                                    options={cardOptions || []}\r\n                                    onChange={(_e, { value }) => {\r\n                                        setSelectedCards(value as string[]);\r\n                                    }}\r\n                                />\r\n                                <Form.Dropdown\r\n                                    label=\"Filter By Expansion: \"\r\n                                    multiple\r\n                                    clearable\r\n                                    search\r\n                                    selection\r\n                                    value={selectedExpansions}\r\n                                    options={setList.map((s) => ({\r\n                                        key: s.code,\r\n                                        value: s.code,\r\n                                        text: s.name\r\n                                    }))}\r\n                                    onChange={(_e, { value }) => {\r\n                                        setSelectedExpansions(value as string[]);\r\n                                    }}\r\n                                />\r\n                                <Form.Field>Preview Text</Form.Field>\r\n                                <Form.Checkbox\r\n                                    radio\r\n                                    name=\"textFormatRadioGroup\"\r\n                                    label=\"Markdown\"\r\n                                    value={textFormat}\r\n                                    checked={textFormat === \"markdown\"}\r\n                                    onClick={() => setTextFormat(\"markdown\")}\r\n                                />\r\n                                <Form.Checkbox\r\n                                    radio\r\n                                    name=\"textFormatRadioGroup\"\r\n                                    label=\"Plaintext\"\r\n                                    value={textFormat}\r\n                                    checked={textFormat === \"plaintext\"}\r\n                                    onClick={() => setTextFormat(\"plaintext\")}\r\n                                />\r\n                                <Form.Checkbox\r\n                                    toggle\r\n                                    label=\"Marked as Spicy?\"\r\n                                    checked={filterForSpice}\r\n                                    onChange={(_e, { checked }) => setFilterForSpice(!!checked)}\r\n                                />\r\n                                <Form.Checkbox\r\n                                    toggle\r\n                                    label=\"Marked as Favorite?\"\r\n                                    checked={filterForFave}\r\n                                    onChange={(_e, { checked }) => setFilterForFave(!!checked)}\r\n                                />\r\n                            </Accordion.Content>\r\n                        </Accordion>\r\n                    </Grid.Column>\r\n                </Grid.Row>\r\n\r\n                <Grid.Row>\r\n                    <Grid.Column width={16}>\r\n                        {scrapeError && (\r\n                            <Message negative>\r\n                                <p>There was an error while attempting to scrape results. Please try again later</p>\r\n                            </Message>\r\n                        )}\r\n                        <Tab panes={panes} renderActiveOnly={false} />\r\n                    </Grid.Column>\r\n                </Grid.Row>\r\n                <Grid.Row>\r\n                    <Button\r\n                        onClick={() => {\r\n                            copyToClipboard(generatePlaintext(filteredResults));\r\n                        }}\r\n                        content=\"Copy Plaintext\"\r\n                    />\r\n                    <Button\r\n                        onClick={() => {\r\n                            copyToClipboard(generateMarkdown(filteredResults));\r\n                        }}\r\n                        content=\"Copy Markdown\"\r\n                    />\r\n                </Grid.Row>\r\n            </Grid>\r\n            <DeckDetailModal\r\n                open={deckModalOpen && !!resultList?.length}\r\n                onClose={() => setDeckModalOpen(false)}\r\n                results={resultList}\r\n                setResults={setResultList}\r\n            />\r\n            <RulesModal open={rulesModalOpen} onClose={handleRulesModalClose} archetypeRules={archetypeRules} setArchetypeRules={setArchetypeRules} />\r\n            <InfoModal open={infoModalOpen} onClose={() => setInfoModalOpen(false)} />\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n    window.location.hostname === \"localhost\" ||\r\n        // [::1] is the IPv6 localhost address.\r\n        window.location.hostname === \"[::1]\" ||\r\n        // 127.0.0.0/8 are considered localhost for IPv4.\r\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\ntype Config = {\r\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n    if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n        // The URL constructor is available in all browsers that support SW.\r\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n        if (publicUrl.origin !== window.location.origin) {\r\n            // Our service worker won't work if PUBLIC_URL is on a different origin\r\n            // from what our page is served on. This might happen if a CDN is used to\r\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n            return;\r\n        }\r\n\r\n        window.addEventListener(\"load\", () => {\r\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n            if (isLocalhost) {\r\n                // This is running on localhost. Let's check if a service worker still exists or not.\r\n                checkValidServiceWorker(swUrl, config);\r\n\r\n                // Add some additional logging to localhost, pointing developers to the\r\n                // service worker/PWA documentation.\r\n                navigator.serviceWorker.ready.then(() => {\r\n                    console.log(\"This web app is being served cache-first by a service \" + \"worker. To learn more, visit https://bit.ly/CRA-PWA\");\r\n                });\r\n            } else {\r\n                // Is not localhost. Just register service worker\r\n                registerValidSW(swUrl, config);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n    navigator.serviceWorker\r\n        .register(swUrl)\r\n        .then((registration) => {\r\n            registration.onupdatefound = () => {\r\n                const installingWorker = registration.installing;\r\n                if (installingWorker == null) {\r\n                    return;\r\n                }\r\n                installingWorker.onstatechange = () => {\r\n                    if (installingWorker.state === \"installed\") {\r\n                        if (navigator.serviceWorker.controller) {\r\n                            // At this point, the updated precached content has been fetched,\r\n                            // but the previous service worker will still serve the older\r\n                            // content until all client tabs are closed.\r\n                            console.log(\"New content is available and will be used when all \" + \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\");\r\n\r\n                            // Execute callback\r\n                            if (config && config.onUpdate) {\r\n                                config.onUpdate(registration);\r\n                            }\r\n                        } else {\r\n                            // At this point, everything has been precached.\r\n                            // It's the perfect time to display a\r\n                            // \"Content is cached for offline use.\" message.\r\n                            console.log(\"Content is cached for offline use.\");\r\n\r\n                            // Execute callback\r\n                            if (config && config.onSuccess) {\r\n                                config.onSuccess(registration);\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n            };\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Error during service worker registration:\", error);\r\n        });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n    // Check if the service worker can be found. If it can't reload the page.\r\n    fetch(swUrl, {\r\n        headers: { \"Service-Worker\": \"script\" }\r\n    })\r\n        .then((response) => {\r\n            // Ensure service worker exists, and that we really are getting a JS file.\r\n            const contentType = response.headers.get(\"content-type\");\r\n            if (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\r\n                // No service worker found. Probably a different app. Reload the page.\r\n                navigator.serviceWorker.ready.then((registration) => {\r\n                    registration.unregister().then(() => {\r\n                        window.location.reload();\r\n                    });\r\n                });\r\n            } else {\r\n                // Service worker found. Proceed as normal.\r\n                registerValidSW(swUrl, config);\r\n            }\r\n        })\r\n        .catch(() => {\r\n            console.log(\"No internet connection found. App is running in offline mode.\");\r\n        });\r\n}\r\n\r\nexport function unregister() {\r\n    if (\"serviceWorker\" in navigator) {\r\n        navigator.serviceWorker.ready\r\n            .then((registration) => {\r\n                registration.unregister();\r\n            })\r\n            .catch((error) => {\r\n                console.error(error.message);\r\n            });\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}